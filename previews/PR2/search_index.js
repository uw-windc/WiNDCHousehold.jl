var documenterSearchIndex = {"docs":
[{"location":"api/#API-Reference","page":"API Reference","title":"API Reference","text":"","category":"section"},{"location":"api/#WiNDCHousehold.HouseholdTable","page":"API Reference","title":"WiNDCHousehold.HouseholdTable","text":"Household\n\nThe primary container for WiNDC household disaggregation data tables. There are  three fields, all dataframes:\n\ndata: The main data table.\nsets: The sets table, describing the different sets used in the model.\nelements: The elements table, describing the different elements in the model.\n\n\n\n\n\n","category":"type"},{"location":"api/#WiNDCHousehold.RawHouseholdData","page":"API Reference","title":"WiNDCHousehold.RawHouseholdData","text":"RawHouseholdData\nRawHouseholdData(\n    state_table::WiNDCRegional.State,\n    cps::Dict{Symbol,DataFrame},\n    nipa::DataFrame,\n    acs::DataFrame,\n    medicare::DataFrame,\n    labor_tax_rates::DataFrame,\n    cex_income_elasticities::DataFrame,\n    pce_shares::DataFrame,\n    capital_tax_rates::DataFrame;\n    state_fips = WiNDCHousehold.load_state_fips(),\n    income_categories = WiNDCHousehold.load_cps_income_categories(),\n    state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation]),\n)\n\nA container for all raw data used in WiNDCHousehold processing.\n\nFields\n\nstate_fips::DataFrame: State FIPS codes.\nincome_categories::DataFrame: Income category mappings.\nstate_abbreviations::DataFrame: State abbreviations.\nincome::DataFrame: CPS income data.\nnumhh::DataFrame: CPS number of households data.\nnipa::DataFrame: NIPA data.\nacs_commute::DataFrame: ACS commute data.\nmedicare::DataFrame: Medicare data.\nlabor_tax_rates::DataFrame: Labor tax rates.\ncapital_tax_rates::DataFrame: Capital tax rates.\nnipa_cps::DataFrame: NIPA vs CPS income categories mapping.\nwindc_vs_nipa_income_categories::DataFrame: WiNDC vs NIPA income categories mapping.\nnipa_fringe::DataFrame: NIPA fringe benefit markup data.\ncps_data::DataFrame: Processed CPS data.\ncex_income_elasticities::DataFrame: CEX income elasticities data.\npce_shares::DataFrame: PCE shares data.\n\n\n\n\n\n","category":"type"},{"location":"api/#WiNDCHousehold.NYSE_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.NYSE_data","text":"NYSE_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts NYSE-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, \n        :Household_Supply,\n        :Capital_Demand;\n        normalize=:Use\n    )\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.absorption-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.absorption","text":"absorption(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter::Symbol = :absorption,\n    normalize::Bool = false\n)\n\nCalculate the absorption for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :absorption).\nnormalize::Bool: Flip the resulting sign of the data (default is false).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :abs state year :absorption value\n\nNon-symbol values are sets.\n\n!!!note \"Negative Values     Absorption is a demand-side value, which means the resulting values will be      negative. If you wish to have positive values, set the normalize argument to true.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nIntermediate_Demand\nOther_Final_Demand\n\nCalculation\n\nrm Absorption = sum_rm sectors rm Intermediate_Demand + sum_rm other_final_demandrm Other_Final_Demand\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.adjust_capital_demand-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.adjust_capital_demand","text":"adjust_capital_demand(\n    HH::HouseholdTable,\n    state_table::State,\n    raw_data::RawHouseholdData;\n)\n\nConvert gross capital demand in the state_table to net capital demand by removing the capital tax based on state-level capital tax rates provided in raw_data.\n\n    rm Net Capital Demand = fracrm Gross Capital Demand1 + r\n\nRaw Data\n\nraw_data.capital_tax_rates (State-level capital tax rates)\n\nParameters Disaggregated\n\nCapital_Demand\n\nSets Added\n\ncapital_tax \nDomain: row\nDescription: \"Capital Tax\"\nElements: cap_tax\nCapital_Tax - From state_table\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.adjusted_capital_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.adjusted_capital_income","text":"adjusted_capital_income(\n    HH::HouseholdTable,\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData\n)\n\nCompute the adjusted capital income for each household in HH based on capital ownership and total capital demand.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nadjusted_capital::DataFrame: A DataFrame with columns :hh, :year, :state, and :capital representing the adjusted capital income for each household.\n\nComputation\n\nThe adjusted capital income is computed using the formula:\n\n    rm Adjusted Capital Income = rm Capital Ownership Share cdot rm Total Capital Demand cdot fracrm Interest Incomesum_hhrm Interest Income\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.adjusted_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.adjusted_consumption","text":"adjusted_consumption(\n    HH::HouseholdTable,\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData\n)\n\nCompute the adjusted consumption for each household in HH based on consumption shares, personal consumption from state_table, and the household savings rate.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nadjusted_consumption::DataFrame: A DataFrame with columns :hh, :year, :state, and :consumption representing the adjusted consumption for each household.\n\nComputation\n\nThe adjusted consumption is computed using the formula:\n\n    rm Adjusted Consumption = fracrm Consumption Share cdot rm Personal Consumption1 - rm Savings Rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.adjusted_wages-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.adjusted_wages","text":"adjusted_wages(\n    HH::HouseholdTable,\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData;\n    tax_adjustment::Bool = true\n)\n\nCompute the adjusted wages for each household in HH based on labor endowment multipliers and labor tax rates.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data and labor tax rates.\n\nKeyword Arguments\n\ntax_adjustment::Bool = true: Whether to apply labor tax adjustments.\n\nReturns\n\nadjusted_wages::DataFrame: A DataFrame with columns :hh, :year, :state, and :wage representing the adjusted wages for each household.\n\nComputation\n\nThe adjusted wages are computed using the formula:\n\n    rm Adjusted Wage = rm Wage Share cdot (rm tax adjustmentcdot rm Labor Tax Rate - 1) cdot rm Labor Endowment Multiplier cdot sum_sectorsrm Labor Demand\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.aggregate_transfer_payment-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.aggregate_transfer_payment","text":"aggregate_transfer_payment(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :total_transfers,\n)\n\nAggregate the transfer payments for each household type in each region.\n\nRequired Arguments\n\nHH::HouseholdTable: The household data.\n\nKeyword Arguments\n\ncolumn::Symbol = :value: The column to be used for the aggregation.\noutput::Symbol = :value: The name of the output column.\nparameter::Symbol =:total_transfers`: The name of the parameter column.\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:tt household state year :total_transfers value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nTransfer_Payment\n\nCalculation\n\nThe total transfer payments are calculated as:\n\nrm Total_Transfers = sum_rm transfers rm Transfer_Payment\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.armington_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.armington_data","text":"armington_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts Armington-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        absorption(data; normalize = true),\n        table(data, :Reexport, :National_Demand, :Local_Demand, :Import, :Margin_Demand; normalize = :Use),\n        tax_rate(data),\n        duty_rate(data)\n    )\n\nAggregate data\n\nWiNDCHousehold.absorption\nWiNDCHousehold.tax_rate\nWiNDCHousehold.duty_rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.average_labor_tax_rate","text":"average_labor_tax_rate(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :average_labor_tax_rate,\n)\n\nCalculate the average labor tax rate for each household type in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :average_labor_tax_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:altr household state year :averagelabortax_rate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nAverage_Labor_Tax\nLabor_Endowment\n\nCalculation\n\nThe average labor tax rate is calculated as:\n\nrm Average_Labor_Tax_Rate = fracrm Average_Labor_Taxsum_rm Destinations rm Labor_Endowment\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.build_household_table-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.build_household_table","text":"build_household_table(\n        state_table::State,\n        raw_data::RawHouseholdData;\n    )\n\nBuild a HouseholdTable from the given state_table and raw_data.\n\nDisaggregation Steps\n\nThe disaggregation is performed through the following steps:\n\nWiNDCHousehold.initialize_table\nWiNDCHousehold.adjust_capital_demand\nWiNDCHousehold.build_transfer_payments\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.build_transfer_payments-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.build_transfer_payments","text":"build_transfer_payments(\n    HH::HouseholdTable,\n    raw_data::RawHouseholdData,\n)\n\nAdd transfer payments to the HouseholdTable HH based on the data in raw_data.\n\nRaw Data\n\nWiNDCHousehold.transfer_weights\nraw_data.income (CPS income data)\nraw_data.medicare (Medicare and Medicaid data)\nraw_data.income_categories (CPS income categories)\n\nSets Added\n\nTransfer_Payment \nDomain: parameter\nDescription: \"Transfer Payments\"\nElements: transfer_payment\ntransfer_payments \nDomain: row\nDescription: \"Transfer Payments\"\n\nElement Description\nhucval unemployment compensation\nhwcval workers compensation\nhssval social security\nhssival supplemental security\nhpawval public assistance or welfare\nhvetval veterans benefits\nhsurval survivors income\nhdisval disability\nhedval educational assistance\nhcspval child support\nhfinval financial assistance\nmedicare edicare\nmedicaid edicaid\nother Other Income\n\nnote: \nThe year for medicare and medicaid is fixed at 2024. Need to update for more  years in the future.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.calibration_model_1-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.calibration_model_1","text":"calibration_model_1(HH::HouseholdTable, state_table::State, HH_Raw_Data::RawHouseholdData)\n\nThis is a placeholder docstring. It has been intentionally left blank as this model can be simplified further.\n\nTo Do:\n\nAdd errors if model fails to solve\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.calibration_model_2-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}","page":"API Reference","title":"WiNDCHousehold.calibration_model_2","text":"calibration_model_2(\n    HH::HouseholdTable, \n    state_table::State, \n    HH_Raw_Data::RawHouseholdData,\n    calibration_model_1::JuMP.Model\n)\n\nThis is a placeholder docstring. It has been intentionally left blank as this model can be simplified further.\n\nTo Do:\n\nAdd errors if model fails to solve\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.capital_stock_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.capital_stock_data","text":"capital_stock_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts capital stock-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Capital_Demand; normalize = :Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.capital_tax_rate","text":"capital_tax_rate(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :capital_tax_rate,\n)\n\nCalculate the capital tax rate for each household type in each region. The capital tax rate is defined as the ratio of Capital_Tax to Capital_Demand.\n\nRequired Arguments\n\nHH::HouseholdTable: The household data.\n\nKeyword Arguments\n\ncolumn::Symbol = :value: The column to be used for the calculation.\noutput::Symbol = :value: The name of the output column.\nparameter::Symbol =:capitaltaxrate`: The name of the parameter column.\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:ktr household state year :capitaltaxrate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nCapital_Tax\nCapital_Demand\n\nCalculation\n\nThe capital tax rate is calculated as:\n\nrm Capital_Tax_Rate = fracrm Capital_Taxrm Capital_Demand\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.clean_aggregate_medi_data-Tuple{DataFrames.DataFrame}","page":"API Reference","title":"WiNDCHousehold.clean_aggregate_medi_data","text":"clean_aggregate_medi_data(df::DataFrame)\n\nCleans Medicare or Medicaid aggregate data DataFrame.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.clean_cps_data_year-NTuple{4, Any}","page":"API Reference","title":"WiNDCHousehold.clean_cps_data_year","text":"clean_cps_data_year(year, cps_rw, variables, api_key; state_fips = load_state_fips())\n\nClean and process the CPS data for a given year.\n\nArguments\n\nyear::Int: The year of the CPS data to load.\ncps_rw::Vector{String}: The list of CPS raw variables to load\nvariables::Vector{String}: The list of CPS variables to process.\napi_key::String: The Census API key.\n\nOptional Arguments\n\nstate_fips::DataFrame: A DataFrame containing state FIPS codes. Defaults to loading from load_state_fips().\n\nReturn\n\nReturns a NamedTuple with the following DataFrames:\n\nincome::DataFrame: Income data by household type and state.\ncount::DataFrame: Count of households by household type and state.\nnumhh::DataFrame: Number of households by household type and state.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.compute_economy_wide_savings-Tuple{WiNDCRegional.State}","page":"API Reference","title":"WiNDCHousehold.compute_economy_wide_savings","text":"compute_economy_wide_savings(\n        state_table::WiNDCRegional.State\n    )\n\nCompute the economy-wide savings rate based on personal consumption and investment from the state_table.\n\nReturns\n\neconomy_wide_savings::DataFrame: A DataFrame with columns :year and :economy_wide_sr0 representing the economy-wide savings rate for each year.\n\nComputation\n\n    rm Economy Wide Savings Rate = fracrm Investment Final Demandrm Personal Consumption + Investment Final Demand\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.compute_savings_markup_consumption-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.compute_savings_markup_consumption","text":"compute_savings_markup_consumption(\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData\n)\n\nCompute the savings markup based on personal consumption from the state_table and CPS data in raw_data.\n\nArguments\n\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nsavings_markup_consumption::Float64: The computed savings markup based on consumption.\n\nComputation\n\n    rm Savings Markup = fracrm Total  Personal Consumptionrm Total Consumption\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.compute_savings_markup_save-Tuple{HouseholdTable, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.compute_savings_markup_save","text":"savings_markup_save(\n    HH::HouseholdTable,\n    raw_data::RawHouseholdData\n)\n\nCompute the savings markup for the household table HH based on the raw CPS data in raw_data.\n\nArguments\n\nHH::HouseholdTable: The household table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nsavings_markup_save::Float64: The computed savings markup.\n\nRaw Data Used\n\nraw_data.cps_data (CPS interest data)\nWiNDCHousehold.get_capital_ownership\n\nComputation\n\n    rm Savings Markup = fracrm  Gross Capital Demandrm Total Interest\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.compute_savings_rate-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.compute_savings_rate","text":"compute_savings_rate(\n        HH::HouseholdTable,\n        state_table::WiNDCRegional.State,\n        raw_data::RawHouseholdData\n    )\n\nCompute the savings rate for each household in HH based on the economy-wide savings rate and the household's interest income and consumption.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nsavings_rate::DataFrame: A DataFrame with columns :hh, :year, :state, and :save_rate representing the savings rate for each household.\n\nComputation\n\nThis computation is broken into several steps:\n\nCompute the economy-wide savings rate using WiNDCHousehold.compute_economy_wide_savings.\nCompute the savings markup for savings and consumption using:\nWiNDCHousehold.compute_savings_markup_save and \nWiNDCHousehold.compute_savings_markup_consumption.\nCalculate the interest shares and total shares for each household.\nFinally, compute the savings rate for each household using the formula:\n\n    rm Savings Rate_hh = fracrm (Economy Wide Savings Rate) cdot (Interest Share)Total Share\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.consumption_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.consumption_data","text":"consumption_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts consumption-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Personal_Consumption; normalize = :Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.cpi_data-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.cpi_data","text":"cpi_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts consumer price index-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Personal_Consumption; normalize=:Use) |>\n        x -> groupby(x, [:col, :region, :parameter]) |>\n        x -> combine(x, :value => sum => :value)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}","page":"API Reference","title":"WiNDCHousehold.cps_vs_nipa_income_categories","text":"cps_vs_nipa_income_categories(cps_income::DataFrame, nipa::DataFrame)\n\nCompare CPS income data to NIPA data by income categories.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.create_personal_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}","page":"API Reference","title":"WiNDCHousehold.create_personal_consumption","text":"create_personal_consumption(\n        HH::HouseholdTable,\n        state_table::WiNDCRegional.State,\n        raw_data::RawHouseholdData,\n        M2::JuMP.Model\n    )\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.disposition_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.disposition_data","text":"disposition_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts disposition-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        regional_local_supply(data),\n        netports(data),\n        total_supply(data),\n        regional_national_supply(data)\n        )\n\nAggregate Data\n\nWiNDCHousehold.regional_local_supply\nWiNDCHousehold.netports\nWiNDCHousehold.total_supply\nWiNDCHousehold.regional_national_supply\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.duty_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.duty_rate","text":"dutyrate(         HH::HouseholdTable;          column::Symbol = :value,          output::Symbol = :value,         parameter = :dutyrate     )\n\nCalculate the duty rate for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :duty_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :dr state year :duty_rate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nDuty\nImport\n\nCalculation\n\nrm Duty_Rate = fracrm Dutyrm Import\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.fetch_zip_data-Tuple{String, Function}","page":"API Reference","title":"WiNDCHousehold.fetch_zip_data","text":"fetch_zip_data(\n    url::String,\n    filter_function::Function;;\n    output_path::String = tempname(),\n)\n\nDownload a zip file from a given url and extract the files in the zip file that  are in the data NamedTuple.\n\nThis function will throw an error if not all files in data are extracted.\n\nRequired Arguments\n\nurl::String: The url of the zip file to download.\nfilter_function::Function;: A function that takes a string and returns a boolean.  This function is used to filter the files in the zip file, it should return true   if the file should be extracted and false otherwise.\n\nOptional Arguments\n\noutput_path::String: The path to save the extracted files. Default is a \n\ntemporary directory. If this is not an absolute path, it will be joined with the  current working directory.\n\nOutput\n\nReturns a vector of the absolute paths to the extracted files.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.fica_tax_rate","text":"fica_tax_rate(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :fica_tax_rate,\n)\n\nCalculate the FICA tax rate for each household type in each region.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :fica_tax_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:ftr household state year :ficataxrate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nFICA_Tax\nLabor_Endowment\n\nCalculation\n\nThe FICA tax rate is calculated as:\n\nrm FICA_Tax_Rate = fracrm FICA_Taxsum_rm Destinations rm Labor_Endowment\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.get_capital_ownership-Tuple{WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.get_capital_ownership","text":"get_capital_ownership(\n    raw_data::RawHouseholdData;\n    type::Symbol = :all\n)\n\nGet the capital ownership share from raw_data.\n\nArguments\n\nraw_data::RawHouseholdData: The raw household data containing CPS and NIPA data.\n\nKeyword Arguments\n\ntype::Symbol = :all: The type of capital ownership to retrieve. Options are:\n:all: Returns 1 (100% ownership).\n:partial: Computes the ownership share based on CPS vs NIPA data.\n\nReturns\n\ncap_own::Float64: The capital ownership share.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.get_cps_data_api-Tuple{Any, Any, Any}","page":"API Reference","title":"WiNDCHousehold.get_cps_data_api","text":"get_cps_data_api(year, vars, api_key)\n\nPull the raw data directly from the API\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.government_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.government_data","text":"government_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts government-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        table(data, \n            :Government_Final_Demand,\n            :Transfer_Payment,\n            :Labor_Endowment;\n            normalize=:Use\n        ),\n        WiNDCHousehold.government_deficit(data),\n        WiNDCHousehold.average_labor_tax_rate(data),\n    )\n\nAggregate Data\n\nWiNDCHousehold.government_deficit\nWiNDCHousehold.average_labor_tax_rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.government_deficit-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.government_deficit","text":"government_deficit(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :government_deficit,\n)\n\nCalculate the government deficit for each year.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :government_deficit).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:gd :gd :gd year :government_deficit value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nGovernment_Final_Demand\nTransfer_Payment\nAverage_Labor_Tax\nFICA_Tax\nCapital_Tax\nOutput_Tax\nTax\nDuty\n\nCalculation\n\nThe government deficit is calculated as:\n\nrm Government_Deficit = - sum (Government_Final_Demand - Transfer_Payment - Average_Labor_Tax - FICA_Tax - Capital_Tax - Output_Tax - Tax - Duty)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.household_model-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.household_model","text":"household_model(\n    HH::HouseholdTable;\n    etaK::Real = 4.0,\n    )\n\nConstructs a WiNDCHousehold MPSGE model from a WiNDCHousehold data table.\n\nArguments\n\nHH::HouseholdTable: A WiNDCHousehold data table.\n\nKeyword Arguments\n\netaK::Real = 4.0: Capital transformation elasticity\n\nReturns\n\nM::MPSGEModel: An MPSGE model representing the household sector.\n\nParameters\n\nThe initial values of the parameters are given by parameter_data. The  parameters included in the model are:\n\nOTR[r=states, s=sectors]:  Output tax rate\nTR[r=states, g=commodities]: Tax rate\nDR[r=states, g=commodities]: Duty rate\nTK[r=states, s=sectors]:  Capital tax rate\nFICA[r=states, h=households]:  FICA tax rate\nLTR[r=states, h=households]:  Labor tax rate\n\nIf the model is denoted M, these parameters can be accessed as M[:OTR],  M[:TR], etc. \n\nVariables\n\nSectors\n\nY[r=states, s=sectors]:\" Production\nX[r=states, g=commodities]:\" Disposition\nA[r=states, g=commodities]:\" Absorption\nC[r=states, h=households]:\" Household Consumption\nMS[r=states, m=margins]:\" Margin supply\nLS[r=states, h=households]:\" Labor supply\nKS: Aggregate Capital stock\n\nCommodities\n\nPA[r=states, g=commodities]:\" Regional market (input)\nPC[r=states, h=households]:\" Consumer price index\nPD[r=states, g=commodities]:\" Local market price\nPFX: Foreign exchange\nPK: Aggregate return to capital\nPL[r=states]:\" Wage rate\nPLS[r=states, h=households]:\" Leisure price\nPM[r=states, m=margins]:\" Margin price\nPN[g=commodities]:\" National market\nPY[r=states, g=commodities]:\" Regional market (output)\nRK[r=states, s=sectors]:\" Sectoral rental rate\nRKS: Capital stock\n\nConsumers\n\nRA[r=states, h=households]: Representative agent\nNYSE: Aggregate capital owner\nINVEST: Aggregate investor\nGOVT: Aggregate government\n\nAuxiliaries\n\nAll auxiliaries start with a value of 1. \n\nSAVERATE: Domestic saving rate\nTRANS: Budget balance rationing variable\nSSK: Steady-state capital stock\nCPI: Consumer price index\n\nProduction Blocks\n\nY - Sectoral Production in Each State\n\nWiNDCHousehold.sectoral_output\n\nsectoral_output(HH; output = :DefaultDict) |> Q->\n@production(M, Y[r=states, s=sectors], [t=0, s=0, va=>s=1], begin\n    @output(PY[r,g=commodities], Q[g, s, r, :intermediate_supply],                     t,  taxes = [Tax(GOVT, M[:OTR][r,s])], reference_price = 1-Q[:otr, s, r, :output_tax_rate])\n    @input(PA[r, g=commodities], Q[g, s, r, :intermediate_demand],                     s)\n    @input(PL[r],            sum(Q[l, s, r, :labor_demand] for l in labor_demand),     va)\n    @input(RK[r, s],         sum(Q[k, s, r, :capital_demand] for k in capital_demand), va, taxes = [Tax(GOVT, M[:TK][r,s])], reference_price = 1 + Q[:ktr, s, r, :capital_tax_rate])\nend)\n\nX - Commodity Disposition in Each State\n\nWiNDCHousehold.disposition_data\n\ndisposition_data(HH; output = :DefaultDict) |> Q->\n@production(M, X[r=states, g=commodities], [s=0, t=4], begin\n    @output(PFX,      Q[g, r, :netport],                t)\n    @output(PN[g],    Q[g, r, :region_national_supply], t)\n    @output(PD[r, g], Q[g, r, :region_local_supply],    t)\n    @input(PY[r, g],  Q[g, r, :total_supply],           s)\nend)\n\nA - Armington Commodity Absorption in Each State\n\nWiNDCHousehold.armington_data\n\narmington_data(HH; output = :DefaultDict) |> Q-> \n@production(M, A[r=states, g=commodities], [t=0, s=0, dm => s = 2, d=>dm=4], begin\n    @output(PA[r, g],        Q[g, :abs, r, :absorption],                  t, taxes = [Tax(GOVT, M[:TR][r,g])], reference_price = 1 - Q[g, :tr, r, :tax_rate])\n    @output(PFX,             Q[g, :reexport, r, :reexport],               t)\n    @input(PN[g],            Q[g, :national_demand, r, :national_demand], d)\n    @input(PD[r, g],         Q[g, :local_demand, r, :local_demand],       d)\n    @input(PFX,          sum(Q[g, i, r, :import] for i in imports),       dm, taxes = [Tax(GOVT, M[:DR][r,g])], reference_price = 1 + Q[g, :dr, r, :duty_rate])\n    @input(PM[r, m=margins], Q[g, m, r, :margin_demand],                  s)\nend)\n\nMS - Margin Supply and Demand in Each State\n\nWiNDCHousehold.margin_supply_data\n\nmargin_supply_data(HH; output = :DefaultDict) |> Q->\n@production(M, MS[r=states, m=margins], [t=0, s=0], begin\n    @output(PM[r, m],        sum(Q[g, m, r, :margin_demand] for g in commodities), t)\n    @input(PN[g=commodities],    Q[g, m, r, :national_margin_supply],              s)\n    @input(PD[r, g=commodities], Q[g, m, r, :local_margin_supply],                 s)\nend)\n\nC - Household Consumption in Each State\n\nWiNDCHousehold.consumption_data\n\nconsumption_data(HH; output = :DefaultDict) |> Q->\n@production(M, C[r=states, h=households], [t=0, s=1], begin\n    @output(PC[r, h],        sum(Q[g, h, r, :personal_consumption] for g in commodities), t)\n    @input(PA[r, g=commodities], Q[g, h, r, :personal_consumption],                       s)\nend)\n\nLS - Labor Supply in Each State\n\nWiNDCHousehold.labor_data\n\nlabor_data(HH; output = :DefaultDict) |> Q->\n@production(M, LS[r=states, h=households], [t=0, s=1], begin\n    @output(PL[q=states], Q[q, h, r, :labor_endowment], t, taxes = [Tax(GOVT, M[:LTR][r,h] + M[:FICA][r,h])], reference_price = 1 - Q[:ltr, h, r, :marginal_labor_tax_rate] - Q[:ftr, h, r, :fica_tax_rate])\n    @input(PLS[r, h],     Q[:ls, h, r, :labor_supply], s)\nend)\n\nKS - Capital Stock Transformation\n\nWiNDCHousehold.capital_stock_data\n\ncapital_stock_data(HH; output = :DefaultDict) |> Q->\n@production(M, KS, [t=etaK, s=1], begin\n    @output(RK[r=states, s=sectors], Q[s, r, :capital_demand], t)\n    @input(RKS,                  sum(Q[ss, rr, :capital_demand] for ss in sectors, rr in states), s)\nend)\n\nDemands\n\nRA - Representative Agent Demand in Each State\n\nWiNDCHousehold.representative_agent_data\n\nrepresentative_agent_data(HH; output = :DefaultDict) |> Q->\n@demand(M, RA[r=states, h=households], begin\n    @final_demand(PC[r, h], sum(Q[g, h, r, :personal_consumption] for g in commodities; init=0))\n    @final_demand(PLS[r, h],    Q[:ld, h, r, :leisure_demand])\n    @endowment(PLS[r, h],       Q[:ld, h, r, :leisure_demand] + Q[:ls, h, r, :labor_supply])\n    @endowment(PFX,         sum(Q[trn, h, r, :transfer_payment] for trn in transfers; init=0))\n    @endowment(PLS[r, h],   (M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))\n    @endowment(PK,              Q[:interest, h, r, :household_interest])\n    @endowment(PFX,            -Q[:savings, h, r, :savings]*SAVERATE)\nend, elasticity = Q[:els, h, r, :leisure_consumption_elasticity])\n\nNYSE - Aggregate Capital Owner Demand\n\nWiNDCHousehold.NYSE_data\n\nNYSE_data(HH; output = :DefaultDict) |> Q->\n@demand(M, NYSE, begin\n    @final_demand(PK,                       sum(Q[row, col, r, :household_supply] for row in commodities, col in personal_consumption, r in states; init=0) + sum(Q[row, col, r, :capital_demand] for row in capital_demand, col in sectors, r in states; init=0))\n    @endowment(PY[r=states, g=commodities], sum(Q[g, col, r, :household_supply] for col in personal_consumption; init=0))\n    @endowment(RKS,                         sum(Q[k, s, r, :capital_demand] for k in capital_demand, s in sectors, r in states;init=0)*SSK)\nend)\n\nINVEST - Aggregate Investor Demand\n\nWiNDCHousehold.invest_data\n\ninvest_data(HH; output = :DefaultDict) |> Q->\n@demand(M, INVEST, begin\n    @final_demand(PA[r=states, g=commodities], Q[g, :invest, r, :investment_final_demand])\n    @endowment(PFX,                        sum(Q[:savings, h, r, :savings] for h in households, r in states; init=0)*SAVERATE)\n    @endowment(PFX, 0) # fsav0\nend)\n\nGOVT - Aggregate Government Demand\n\nWiNDCHousehold.government_data\n\ngovernment_data(HH; output = :DefaultDict) |> Q->\n@demand(M, GOVT, begin\n    @final_demand(PA[r=states, g=commodities], Q[g, :govern, r, :government_final_demand])\n    @endowment(PFX,                 -TRANS*sum(Q[trn, h, r, :transfer_payment] for trn in transfers, h in households, r in states; init=0))\n    @endowment(PFX,                            Q[:gd, :gd, :gd, :government_deficit])\n    @endowment(PLS[r=states, h=households], -(M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))\nend)\n\nAuxiliary Constraints\n\nSSK - Steady-State Capital Stock Constraint\n\nWiNDCHousehold.ssk_data\n\nssk_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, SSK, \n    sum(Q[g, :invest, r, :investment_final_demand]*(PA[r,g]-RKS) for g in commodities, r in states)\n)\n\nSAVERATE - Domestic Saving Rate Constraint\n\nWiNDCHousehold.saverate_data\n\nsaverate_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, SAVERATE, \n    INVEST - sum(Q[g, :invest, r, :investment_final_demand]*PA[r,g]*SSK for g in commodities, r in states)\n)\n\nTRANS - Budget Balance Rationing Variable Constraint\n\nWiNDCHousehold.trans_data\n\ntrans_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, TRANS,\n    GOVT - sum(PA[r,g]*Q[g, :govern, r, :government_final_demand] for g in commodities, r in states)\n)\n\nCPI - Consumer Price Index Constraint\n\nWiNDCHousehold.cpi_data\n\ncpi_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, CPI,\n    CPI - sum(PC[r,h]*Q[h, r, :personal_consumption] for h in households, r in states)/ sum(Q[h, r, :personal_consumption] for h in households, r in states; init=0)\n)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.household_raw_data-Tuple{Dict}","page":"API Reference","title":"WiNDCHousehold.household_raw_data","text":"household_raw_data()\nhousehold_raw_data(path::String)\nhousehold_raw_data(info::Dict)\n\nLoad the raw household data based on the provided configuration dictionary.\n\nArguments\n\nIf no arguments are provided, the function loads the configuration from household.yaml  in the current directory. If a path::String is provided, it loads the configuration from the specified path. If a info::Dict is provided, it uses the given configuration dictionary directly.\n\nReturns\n\nThis currently returns a tuple containing:\n\nA State table object\nA WiNDCHousehold.RawHouseholdData object containing all the raw household data.\n\nRaw Data Loaded\n\nWiNDCHousehold.load_cps_data_api\nWiNDCHousehold.load_nipa_data_api\nWiNDCHousehold.load_acs_data_api\nWiNDCHousehold.load_medicare_data_api\nWiNDCHousehold.load_labor_tax_rates\nWiNDCHousehold.load_capital_tax_rates\nWiNDCHousehold.load_cex_income_elasticities\nWiNDCHousehold.load_pce_shares\n\nMaps Loaded\n\nWiNDCHousehold.load_state_fips\nWiNDCHousehold.load_cps_income_categories\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.initialize_table-Tuple{WiNDCRegional.State}","page":"API Reference","title":"WiNDCHousehold.initialize_table","text":"initialize_table(state_table::State)\n\nCreate an initial HouseholdTable from a State table by selecting only the  relevant parameters, sets, and elements.\n\nEssentially, all parameters, sets, and elements are maintained except those related to personal_consumption.\n\nParameters Maintained\n\nCapital_Demand\nDuty\nExport\nGovernment_Final_Demand\nHousehold_Supply\nImport\nIntermediate_Demand\nIntermediate_Supply\nInvestment_Final_Demand\nLabor_Demand\nLocal_Demand\nLocal_Margin_Supply\nMargin_Demand\nNational_Demand\nNational_Margin_Supply\nOutput_Tax\nReexport\nTax\n\nSets Maintained\n\nduty   \nexport\ngovernment_final_demand\nimport\ninvestment_final_demand\nlocal_demand\nmargin\nnational_demand\nreexport\nsector\ntax\ntrade\ntransport\nstate\ncapital_demand\ncommodity\nlabor_demand\noutput_tax\nyear\nFinal_Demand\nOther_Final_Demand\nMargin_Supply\nUse\nSupply\nValue_Added\n\nSets Added\n\nhousehold \nDomain: col\nDescription: \"Household Categories\"\nElements: hh1, hh2, hh3, hh4, hh5\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.invest_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.invest_data","text":"invest_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts investment-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, \n        :Investment_Final_Demand,\n        :Savings;\n        normalize=:Use\n    )\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.labor_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.labor_data","text":"labor_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts leisure-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n   vcat(\n        table(data, :Labor_Endowment),\n        WiNDCHousehold.labor_supply(data),\n        WiNDCHousehold.marginal_labor_tax_rate(data),\n        WiNDCHousehold.fica_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.labor_supply\nWiNDCHousehold.marginal_labor_tax_rate\nWiNDCHousehold.fica_tax_rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.labor_endowment_multiplier-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.labor_endowment_multiplier","text":"labor_endowment_multiplier(\n    HH::HouseholdTable,\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData\n)\n\nCompute the labor endowment multiplier for each region based on labor demand and wages.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nlabor_endow_multiplier::DataFrame: A DataFrame with columns :region and :le_mult representing the labor endowment multiplier for each region.\n\nComputation\n\nThe labor endowment multiplier is computed using the formula:\n\n    rm Labor Endowment Multiplier = fracrm Fringe Benefit Markup cdot rm Wagerm Labor Demand\n\nChanges also made based on commuting patterns to ensure that regions without commuting workers do not have their labor endowment multipliers adjusted beyond 1.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.labor_supply","text":"labor_supply(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :labor_supply,\n)\n\nCalculate the labor supply for households. The labor supply is defined as the labor endowment adjusted for marginal labor taxes and FICA taxes.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :labor_supply).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:ls household state year :labor_supply value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nLabor Endowment\nMarginal Labor Tax\nFICA Tax\n\nCalculation\n\nrm Labor_Supply = sum (Labor_Endowment - Marginal_Labor_Tax - FICA_Tax)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.leisure_consumption_elasticity-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.leisure_consumption_elasticity","text":"leisure_consumption_elasticity(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :leisure_consumption_elasticity,\n)\n\nCalculate the leisure consumption elasticity for households.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :leisure_consumption_elasticity).   \n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:els household state year :leisureconsumptionelasticity value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nPersonal_Consumption\n\nAggregate Parameters\n\nWiNDCHousehold.leisure_demand\nWiNDCHousehold.labor_supply\n\nCalculation\n\nLeisure consumption elasticity is calculated as:\n\nrm Leisure_Consumption_Elasticity = epsilon cdot frac(PCE + LD)PCE cdot fracLSLD\n\nwhere \n\n( \\epsilon ) is the leisure income elasticity (0.2),\nPCE is Personal Consumption Expenditure\nLD is Leisure Demand\nLS is Labor Supply\n\n```\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.leisure_demand","text":"leisure_demand(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :leisure_demand,\n)\n\nCalculate the leisure demand for households. The leisure demand is defined as a fraction of the leisure supply, based on a labor supply income elasticity, which is set to 0.05.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :leisure_demand).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:ld household state year :leisure_demand value\n\nNon-symbol values are sets.\n\nAggregate Parameters\n\nWiNDCHousehold.labor_supply\n\nCalculation\n\nLeisure demand is calculated as:\n\nrm Leisure_Demand = epsilon cdot rm Leisure_Supply\n\nwhere ( \\epsilon ) is the labor supply income elasticity (0.05).\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_acs_data_api-Tuple{Int64, Any}","page":"API Reference","title":"WiNDCHousehold.load_acs_data_api","text":"load_acs_data_api(year::Int, census_api_key; output_path::String = tempname())\n\nPull the raw ACS commuting flow data directly from the Census website for a given year.\n\nArguments\n\nyear::Int: The year of the ACS data to load.\ncensus_api_key::String: The Census API key.\n\nOptional Arguments\n\noutput_path::String: The path to save the downloaded ACS data. Default is a temporary directory.\n\nReturns\n\nReturn a DataFrame with the commuting flow data for the specified year, enriched  with income data from the CPS.\n\nData Source\n\nThe ACS commuting flow data is downloaded from the Census website:\n\nhttps://www2.census.gov/programs-surveys/demo/tables/metro-micro/{year}/commuting-flows-{year}/table1.xlsx\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_acs_medicare_data-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_acs_medicare_data","text":"load_acs_medicare_data(\n    census_api_key::String;\n    years::Vector{Int} = 2009:2024,\n    state_fips::DataFrame = load_state_fips()\n)\n\nLoad ACS Medicare data from the Census API for the specified years.\n\nRequired Arguments\n\ncensus_api_key::String: The Census API key.\n\nOptional Arguments\n\nyears::Vector{Int}: The years of the ACS data to load. Default is 2009 to 2024.\nstate_fips::DataFrame: A DataFrame containing state FIPS codes. Default is   the result of load_state_fips().\n\nnote: Excluded 2020\nThe year 2020 is excluded from the default years because the ACS data for that year does not include Medicare data due to low response rates. \n\nnote: Early years?\nCurrently we don't have data before 2009, so requesting years before. We should update this to just use 2009 data for earlier years.\n\nReturn\n\nReturns a DataFrame with shares of income groups for Medicare enrollment by state  and year.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_capital_tax_rates-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_capital_tax_rates","text":"load_capital_tax_rates(\n    path::String;\n    state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation])\n)\n\nLoad capital tax rates from a CSV file located at path. The CSV is expected to contain state-level capital tax rate information, which will be matched with state abbreviations provided by state_abbreviations.\n\nArguments\n\npath::String: The path to the CSV file.\n\nOptional Arguments\n\nstate_abbreviations::DataFrame: A DataFrame containing state abbreviations    and their corresponding state names. Default loads state FIPS with state    names and abbreviations.\n\nReturns\n\nA DataFrame containing capital tax rates by state.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_cex_income_elasticities-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_cex_income_elasticities","text":"load_cex_income_elasticities(path::String)\n\nLoad CEX income elasticities from a CSV file located at path.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_cps_data_api-Tuple{Any}","page":"API Reference","title":"WiNDCHousehold.load_cps_data_api","text":"load_cps_data_api(api_key; years = 2001:2022)\n\nLoad all the CPS data in the given year range. \n\nArguments\n\napi_key::String: The Census API key.\n\nOptional Arguments\n\nyears::UnitRange{Int}: The range of years to load. Defaults to 2001:2022.\n\nReturn\n\nReturns a NamedTuple with the following DataFrames:\n\nincome::DataFrame: Income data by household type and state.\nshares::DataFrame: Share of income by household type and state.\ncount::DataFrame: Count of households by household type and state.\nnumhh::DataFrame: Number of households by household type and state.\n\nVariables Loaded\n\nVariable Description\nhwsval wages and salaries\nhseval self-employment (nonfarm)\nhfrval self-employment farm\nhucval unemployment compensation\nhwcval workers compensation\nhssval social security\nhssival supplemental security\nhpawval public assistance or welfare\nhvetval veterans benefits\nhsurval survivors income\nhdisval disability\nhintval interest\nhdivval dividends\nhrntval rents\nhedval educational assistance\nhcspval child support\nhfinval financial assistance\nhoival other income\nhtotval total household income\ngestfips state fips\na_exprrp expanded relationship code\nh_hhtype type of household interview\npppos person identifier\nmarsupwt asec supplement final weight\nhdstval retirement distributions - Post 2019\nhpenval pension income - Post 2019\nhannval annuities - Post 2019\nhretval retirement income - Pre 2019\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_cps_income_categories-Tuple{}","page":"API Reference","title":"WiNDCHousehold.load_cps_income_categories","text":"load_cps_income_categories(;\n        path = joinpath(@__DIR__, \"maps\", \"cps_income_categories.csv\"),\n        cols_to_keep = [:windc, :source]\n    )\n\nLoad a CSV file containing CPS income category mappings. The default path is set to maps/cps_income_categories.csv relative to this file's directory. You can specify which columns to keep using the cols_to_keep argument.\n\nReturns a DataFrame with the specified columns as Strings.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_labor_tax_rates-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_labor_tax_rates","text":"load_labor_tax_rates(\n        path::String;\n        state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation])\n    )\n\nLoad labor tax rates from a CSV file located at path. The CSV is expected to  contain state-level labor tax rate information, which will be matched with state  abbreviations provided by state_abbreviations.\n\nArguments\n\npath::String: The path to the CSV file.\n\nOptional Arguments\n\nstate_abbreviations::DataFrame: A DataFrame containing state abbreviations    and their corresponding state names. Default loads state FIPS with state    names and abbreviations.\n\nReturns\n\nA DataFrame containing labor tax rates by household and state.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_medicare_data-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_medicare_data","text":"load_medicare_data(path::String; years::UnitRange{Int}=2009:2024)\n\nLoad Medicare or Medicaid data from a CSV file at the given path.\n\nRequired Arguments\n\npath::String: The path to the CSV file.\n\nOptional Arguments\n\nyears::UnitRange{Int}: The range of years to include in the data. Default is 2009 to 2024.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_medicare_data_api-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_medicare_data_api","text":"load_medicare_data_api(\n    census_api_key::String;\n    url::String = \"https://www.cms.gov/research-statistics-data-and-systems/statistics-trends-and-reports/nationalhealthexpenddata/downloads/resident-state-estimates.zip\",\n    output_path::String = tempname(),\n    years::UnitRange{Int} = 2009:2024,\n    state_fips::DataFrame = load_state_fips()\n)\n\nLoad Medicare and Medicaid data from the CMS website for the specified years.\n\nRequired Arguments\n\ncensus_api_key::String: The Census API key.\n\nOptional Arguments\n\nurl::String: The url of the Medicare/Medicaid data zip file. Default is the CMS website link.\noutput_path::String: The path to save the downloaded and extracted data. Default is   a temporary directory.\nyears::UnitRange{Int}: The range of years to include in the data   Default is 2009 to 2024.\nstate_fips::DataFrame: A DataFrame containing state FIPS codes. Default   is the result of load_state_fips().\n\nReturns\n\nA DataFrame containing Medicare and Medicaid data by state and year.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_nipa_data_api-Tuple{Vector{Int64}, Any}","page":"API Reference","title":"WiNDCHousehold.load_nipa_data_api","text":"load_nipa_data_api(years::Vector{Int}, bea_api_key)\n\nPull the raw data directly from the BEA API\n\nArguments\n\nyears::Vector{Int}: The years of the NIPA data to load.\nbea_api_key::String: The BEA API key.\n\nReturns\n\nA DataFrame with the NIPA data for the specified years.\n\nQuery\n\nVariable Value\nMethod GetData\ndatasetname NIPA\nTableName T20100\nFrequency A\nYear Comma-separated list of years\nResultFormat json\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_pce_shares-Tuple{String}","page":"API Reference","title":"WiNDCHousehold.load_pce_shares","text":"function load_pce_shares(\n    path::String;\n    naics_windc_map = load_windc_naics_map()\n)\n\nLoad PCE shares from a CSV file located at path. The CSV is expected to contain columns for CEX categories, WiNDC categories, and percentage of PCE shares. The function joins this data with a NAICS to WiNDC mapping to associate CEX categories with NAICS codes.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_state_fips-Tuple{}","page":"API Reference","title":"WiNDCHousehold.load_state_fips","text":"load_state_fips(;\n        path = joinpath(@__DIR__, \"maps\", \"state_fips.csv\"),\n        cols_to_keep = [:fips, :state]\n    )\n\nLoad a CSV file containing state FIPS codes and state names. The default path is set to maps/state_fips.csv relative to this file's directory. You can specify which columns to keep using the cols_to_keep argument.\n\nReturns a DataFrame with the specified columns as Strings.\n\nOptional Arguments\n\npath::String: Path to the state FIPS CSV file.\ncols_to_keep::Vector{Symbol}: Columns to keep from the CSV file. Default is [:fips, :state].\n\nIt is recommended to keep the columns :fips and :state for proper mapping.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.load_windc_naics_map-Tuple{}","page":"API Reference","title":"WiNDCHousehold.load_windc_naics_map","text":"load_windc_naics_map(;\n        path = joinpath(@__DIR__, \"maps\", \"naics_windc_map.csv\")\n    )\n\nLoad a CSV file containing the mapping between WiNDC labels and NAICS codes. The default path is set to maps/naics_windc_map.csv relative to this file's directory.\n\nReturns a DataFrame with columns :naics and :windc.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.margin_supply_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.margin_supply_data","text":"margin_supply_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts margin supply and demand parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Margin_Demand, :Margin_Supply; normalize = :Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.marginal_labor_tax_rate","text":"marginal_labor_tax_rate(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :marginal_labor_tax_rate\n)\n\nCalculate the marginal labor tax rate for each household type in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :marginal_labor_tax_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:ltr household state year :marginallabortax_rate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nMarginal_Labor_Tax\nLabor_Endowment\n\nCalculation\n\nThe marginal labor tax rate is calculated as:\n\nrm Marginal_Labor_Tax_Rate = fracrm Marginal_Labor_Taxsum_rm Destinations rm Labor_Endowment\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.netports-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.netports","text":"netports(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :netport\n)\n\nCalculate the netports for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :netport).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :netport state year :netport value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable \n\nExport\nReexport\n\nCalculation\n\nrm Netports = sum (Export + Reexport)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.nipa_fringe_benefit_markup-Tuple{DataFrames.DataFrame}","page":"API Reference","title":"WiNDCHousehold.nipa_fringe_benefit_markup","text":"nipa_fringe_benefit_markup(nipa::DataFrame)\n\nCalculate the fringe benefit markup from NIPA data.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.other_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.other_income","text":"other_income(\n    HH::HouseholdTable,\n    state_table::WiNDCRegional.State,\n    raw_data::RawHouseholdData\n)\n\nCompute the other income for each household in HH based on adjusted consumption, adjusted wages, transfer payments, and adjusted capital income.\n\nArguments\n\nHH::HouseholdTable: The household table.\nstate_table::WiNDCRegional.State: The state-level WiNDC table.\nraw_data::RawHouseholdData: The raw household data containing CPS data.\n\nReturns\n\nother_income::DataFrame: A DataFrame with columns :hh, :year, :state, and :income representing the other income for each household.\n\nComputation\n\nThe other income is computed using the formula:\n\n    rm Other Income = rm Adjusted Consumption + rm Adjusted Wages - rm Average Transfer Payments - rm Adjusted Capital Income\n\nwhere:\n\nAdjusted Consumption is obtained from WiNDCHousehold.adjusted_consumption.\nAdjusted Wages is obtained from WiNDCHousehold.adjusted_wages.\nAverage Transfer Payments the average over households and states of the Transfer_Payment parameter in HH.\nAdjusted Capital Income is obtained from WiNDCHousehold.adjusted_capital_income.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.output_tax_rate","text":"output_tax_rate(\n        HH::HouseholdTable; \n        column::Symbol = :value, \n        output::Symbol = :value,\n        parameter = :output_tax_rate\n    )\n\nCalculate the output tax rate for each commodity in each region.\n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :output_tax_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\n:otr sector state year :outputtaxrate value\n\nNon-symbol values are sets.\n\nParameters\n\nIntermediate_Supply\nOutput_Tax\n\nCalculation\n\nrm Output_Tax_Rate = fracrm Output_Taxsum_rm commodity rm Intermediate_Supply\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.parameter_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.parameter_data","text":"parameter_data(data::T; output = :DataFrame) where T<:AbstractHouseholdTable\n\nReturns initial parameter data for the household model.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\nvcat(\n    output_tax_rate(data),\n    tax_rate(data),\n    duty_rate(data),\n    capital_tax_rate(data),\n    fica_tax_rate(data),\n    marginal_labor_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.output_tax_rate\nWiNDCHousehold.tax_rate\nWiNDCHousehold.duty_rate\nWiNDCHousehold.capital_tax_rate\nWiNDCHousehold.fica_tax_rate\nWiNDCHousehold.marginal_labor_tax_rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.regional_local_supply","text":"regional_local_supply(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :region_local_supply,\n)\n\nCalculate the regional local supply for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :region_local_supply).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :rls state year :regionlocalsupply value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nLocal_Margin_Supply\nLocal_Demand\n\nCalculation\n\nrm Regional_Local_Supply = sum (Local_Margin_Supply + Local_Demand)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.regional_national_supply-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.regional_national_supply","text":"regional_national_supply(\n    HH::HouseholdTable;\n    column::Symbol = :value,\n    output::Symbol = :value,\n    parameter::Symbol = :region_national_supply\n)\n\nCalculate the regional national supply for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :region_national_supply).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :rns state year :regionnationalsupply value\n\nNon-symbol values are sets.\n\nAggregate Parameters\n\nWiNDCHousehold.total_supply\nWiNDCHousehold.netports\nWiNDCHousehold.regional_local_supply\n\nCalculation\n\nrm Regional_National_Supply = rm Total_Supply - rm Netports - rm Regional_Local_Supply\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.representative_agent_data-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.representative_agent_data","text":"representative_agent_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts representative agent-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        leisure_consumption_elasticity(data),\n        average_labor_tax_rate(data),\n        labor_supply(data),\n        leisure_demand(data),\n        table(data, \n            :Personal_Consumption,\n            :Household_Interest,\n            :Transfer_Payment,\n            :Savings,\n            :Labor_Endowment;\n            normalize=:Use\n        )\n    )\n\nAggregate Data\n\nWiNDCHousehold.leisure_consumption_elasticity\nWiNDCHousehold.average_labor_tax_rate\nWiNDCHousehold.labor_supply\nWiNDCHousehold.leisure_demand\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.saverate_data-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.saverate_data","text":"saverate_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts saving rate-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Investment_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.sectoral_output-Tuple{T} where T<:WiNDCHousehold.AbstractHouseholdTable","page":"API Reference","title":"WiNDCHousehold.sectoral_output","text":"sectoral_output(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts sectoral output-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the sectoral output data.\n\nData\n\nvcat(\n    table(data, \n        :Intermediate_Supply, \n        :Intermediate_Demand, \n        :Labor_Demand, \n        :Capital_Demand;\n        normalize = :Use\n        ),\n    output_tax_rate(data),\n    capital_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.output_tax_rate\nWiNDCHousehold.capital_tax_rate\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.ssk_data-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.ssk_data","text":"ssk_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts steady-state capital stock-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Investment_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.tax_rate-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.tax_rate","text":"tax_rate(\n    HH::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter = :tax_rate\n)\n\nCalculate the tax rate, inclusive of subsidies, for each commodity in each region. \n\nArguments\n\nHH::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol: The column to aggregate (default is :value).\noutput::Symbol: The name of the output column (default is :value).\nparameter::Symbol: The parameter to assign to the output (default is :tax_rate).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :tr state year :tax_rate value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nTax\n\nAggregate Parameters\n\nWiNDCHousehold.absorption\n\nCalculation\n\nrm Tax_Rate = fracrm Taxrm Absorption\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.total_supply-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.total_supply","text":"total_supply(\n    data::HouseholdTable; \n    column::Symbol = :value, \n    output::Symbol = :value,\n    parameter::Symbol = :total_supply\n)\n\nCalculate the total supply for each commodity. \n\nArguments\n\ndata::HouseholdTable: The household table containing household data.\n\nKeyword Arguments\n\ncolumn::Symbol = :value: The column to aggregate (default is :value).\noutput::Symbol = :value: The name of the output column (default is :value).\nparameter::Symbol = :total_supply: The parameter to assign to the output (default is :total_supply).\n\nReturns\n\nA DataFrame with the following structure:\n\nrow col region year parameter value\ncommodity :tot_sup state year :total_supply value\n\nNon-symbol values are sets.\n\nParameters\n\nThese values are extracted from the HouseholdTable\n\nIntermediate_Supply\nHousehold_Supply\n\nCalculation\n\nrm Total_Supply = sum_sectors rm Intermediate_Supply + rm Household_Supply\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.trans_data-Tuple{HouseholdTable}","page":"API Reference","title":"WiNDCHousehold.trans_data","text":"trans_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts transfer-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Government_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}","page":"API Reference","title":"WiNDCHousehold.transfer_weights","text":"transfer_weights(raw_data::RawHouseholdData)\n\nCompute transfer weights based on the CPS vs NIPA comparison in raw_data.\n\nTransfer weight is defined as the ratio of NIPA transfer income to CPS transfer income for each transfer category. If the CPS income for a category is zero, the weight from either the Meyer or Rothbaum study is used as a fallback.\n\nTransfer Categories\n\nCategory Source\ngovernment benefits: unemployment insurance hucval\ngovernment benefits: social security hssval\ngovernment benefits: social security hssival\ngovernment benefits: social security hdisval\ngovernment benefits: veterans' benefits hvetval\n\nMeyer and Rothbaum Weights\n\nSource Literature Value\nhucval meyer 1/0.679\nhssval meyer 1/0.899\nhssival meyer 1/0.759\nhdisval meyer 1/0.819\nhvetval rothbaum 1/0.679\nhwcval meyer 1 / 0.527\nhpawval meyer 1 / 0.487\nhsurval meyer 1 / 0.908\nhedval rothbaum 1 / 0.804\nhcspval rothbaum 1 / 0.804\nhfinval meyer 1 / 0.539\n\nnote: \nThe values are hard coded based on literature and may need to be updated as new studies emerge. Also, the year is fixed at 2024 for these weights. Need to update for more years in the future.\n\n\n\n\n\n","category":"method"},{"location":"api/#WiNDCHousehold.windc_vs_nipa_income_categories-Tuple{WiNDCRegional.State, DataFrames.DataFrame}","page":"API Reference","title":"WiNDCHousehold.windc_vs_nipa_income_categories","text":"windc_vs_nipa_income_categories(\n    state_table::WiNDCRegional.State,\n    nipa::DataFrame\n)\n\nCompare WiNDC labor and capital income to NIPA data.\n\n\n\n\n\n","category":"method"},{"location":"data/sets/#Household-Data-Sets","page":"Household Data Sets","title":"Household Data Sets","text":"This is a listing of the data sets and parameters available in the WiNDCHousehold module. These can be accessed using the sets function.\n\nusing WiNDCHousehold\nusing WiNDCHousehold.WiNDCContainer\n\nstate_table, HH_Raw_Data = WiNDCHousehold.load_household_raw_data()\nHH = build_household_table(state_table, HH_Raw_Data)\n\nsets(HH) # Display all available sets as a DataFrame\n\nElements can be accessed using the elements function\n\nelements(HH) # Display all elements as a DataFrame\n\nelements(HH, :commodity) # Display all elements in the commodity set\n\nThe domain column indicates the column of the household table where the set is used. For example, the trade set is used in the column dimension of the household table,  while the commodity set is used in the row dimension.\n\ntable(HH) # The full household table\n\ntable(HH, :commodity) # The household table filtered to only the commodity rows\n\ntable(HH, :Intermediate_Demand, :Intermediate_Supply) # The Intermediate Demand and Supply parameters\n\nBy convention, we give sets lowercasenames and parameters UpperCamelCase names.","category":"section"},{"location":"data/sets/#Sets","page":"Household Data Sets","title":"Sets","text":"name domain description\ntrade col Trade\nexport col Exports\ntransport col Transport\nimport col Imports\nduty col Duty\ntax col Tax\nsector col Sectors\nmargin col Margin sectors\ninvestmentfinaldemand col Investment Final Demand\ngovernmentfinaldemand col Government Final Demand\nreexport col Reexports\nlocal_demand col Local Demand\nnational_demand col National Demand\nhousehold col Household Categories\nstate region States\nlabor_demand row Compensation of employees\ncommodity row Commodities\noutput_tax row Output tax\ncapital_demand row Gross operating surplus\ncapital_tax row Capital Tax\ntransfer_payment row Transfer Payments\ndestination row Destination Region\ninterest row Interest\nmarginallabortax row Marginal Labor Tax\nfica row FICA Tax\naveragelabortax row Average Labor Tax\nsavings row Savings\nyear year ","category":"section"},{"location":"data/sets/#Parameters","page":"Household Data Sets","title":"Parameters","text":"name domain description\nAverageLaborTax parameter Average Labor Tax\nCapital_Demand parameter Capital Demand\nCapital_Tax parameter Capital Tax\nDuty parameter Duty\nExport parameter Exports\nFICA_Tax parameter FICA Tax\nFinal_Demand parameter Final demand\nGovernmentFinalDemand parameter Government Final Demand\nHousehold_Interest parameter Household Interest\nHousehold_Supply parameter Household Supply\nImport parameter Imports\nIntermediate_Demand parameter Intermediate Demand\nIntermediate_Supply parameter Intermediate Supply\nInvestmentFinalDemand parameter Investment Final Demand\nLabor_Demand parameter Labor Demand\nLabor_Endowment parameter Labor Endowment\nLocal_Demand parameter Local Demand\nLocalMarginSupply parameter Local Margin Supply\nMargin_Demand parameter Margin Demand\nMargin_Supply parameter Margin Supply\nMarginalLaborTax parameter Marginal Labor Tax\nNational_Demand parameter National Demand\nNationalMarginSupply parameter National Margin Supply\nOtherFinalDemand parameter Non-export components of final demand\nOutput_Tax parameter Output Tax\nPersonal_Consumption parameter Personal Consumption\nReexport parameter Reexports\nSavings parameter Savings\nSupply parameter Supply (or output) sections of the IO table\nTax parameter Tax\nTransfer_Payment parameter Transfer Payments\nUse parameter Use (or input) sections of the IO table\nValue_Added parameter Value added","category":"section"},{"location":"data/sets/#Aggregate-Parameters","page":"Household Data Sets","title":"Aggregate Parameters","text":"WiNDCHousehold.absorption\nWiNDCHousehold.aggregate_transfer_payment\nWiNDCHousehold.government_deficit\nWiNDCHousehold.labor_supply\nWiNDCHousehold.leisure_consumption_elasticity\nWiNDCHousehold.leisure_demand\nWiNDCHousehold.netports\nWiNDCHousehold.regional_local_supply\nWiNDCHousehold.regional_national_supply\nWiNDCHousehold.total_supply","category":"section"},{"location":"data/sets/#Tax-Rates","page":"Household Data Sets","title":"Tax Rates","text":"All parameters are provided as values. To extract the tax rates, use the following aggregate parameters:\n\nWiNDCHousehold.average_labor_tax_rate\nWiNDCHousehold.capital_tax_rate\nWiNDCHousehold.duty_rate\nWiNDCHousehold.fica_tax_rate\nWiNDCHousehold.marginal_labor_tax_rate\nWiNDCHousehold.output_tax_rate","category":"section"},{"location":"quick_start/#Quick-Start","page":"Quick Start","title":"Quick Start","text":"This guide provides a brief overview of how to use the WiNDCHousehold package.Follow the steps below to get started quickly.","category":"section"},{"location":"quick_start/#Set-up-Julia-Environment","page":"Quick Start","title":"Set up Julia Environment","text":"It is recommended to set up a Julia environment when ever you begin a new project. You can do this by creating a new directory, starting Julia, and activating it in Julia:\n\njulia> ]\npkg> activate .\n\nThen we install the necessary packages:\n\npkg> add WiNDCHousehold, JLD2, DataFrames\n\nThe JLD2 package isn't strictly necessary, we will use it to load the disaggregated Household data. The data can also be but from source using the directions in the Disaggregation Data section.","category":"section"},{"location":"quick_start/#Perform-the-Disaggregation","page":"Quick Start","title":"Perform the Disaggregation","text":"We are going to load pre-disaggregated data, download the JLD2 file household.jld2`. \n\nusing WiNDCHousehold, JLD2, DataFrames\nusing WiNDCHousehold.WiNDCContainer\n\n@load \"household.jld2\" HH\n\nThis loads the Household table as HH. This, in essence, stores the data in a DataFrame. You can view the data using:\n\ntable(HH)\n\nThis DataFrame has 4 domain columns (row, col, region, year), a column indicating the parameter, and the values. The entries in each domain column are elements of sets. You can view these using:\n\nsets(HH)\nelements(HH)\n\nTo view elements for a speicific set (or sets), add them as symbol arguments:\n\nelements(HH, :region)\nelements(HH, :region, :sector)\n\nMore information on the sets can be found in the Sets section.\n\nParameters can be extracted from the table using the symbol arguments:\n\ntable(HH, :Intermediate_Demand, :Intermediate_Supply)\n\ntable(HH, :sector, :Value_Added)","category":"section"},{"location":"quick_start/#Verify-Results-in-CGE-Model","page":"Quick Start","title":"Verify Results in CGE Model","text":"To ensure the disaggregation process was successful, we perform a benchmark verification using a CGE model.\n\nM = household_model(HH);\nsolve!(M, cumulative_iteration_limit = 0)\n\nThis should give a very small residual, indicating that the disaggregation was successful and the data is balanced. The full model documentation is available in the Household Model section.\n\nIf you receive strange errors during the solve (like NaN values), it is likely that you lack a PATHSolver license. Refer to the PATHSolver.jl documentation for more information on obtaining a license.","category":"section"},{"location":"data/input_data/#Disaggregation-Data","page":"Disaggregation Data","title":"Disaggregation Data","text":"This section describes the input data used for disaggregation in the WiNDCHousehold module. The Household data is disaggregated from the WiNDCRegional module using various data sources.\n\nThe data is currently assembled using a mix of local data and API calls to government data sources. The data is provided in two files which can be downloaded here:\n\nThe raw household disaggregation data - This needs to be extracted.\nThe state data file","category":"section"},{"location":"data/input_data/#YAML-Configuration","page":"Disaggregation Data","title":"YAML Configuration","text":"The data files are specified in a YAML configuration file named household.yaml. This file contains paths to the data files and any necessary API keys for accessing government data sources.\n\nThis file is structured as follows:\n\nmetadata:\n  title: Household Data Configuration\n  description: Configuration file for household data sources\n  census_api_key: census_api_key_here\n  bea_api_key: bea_api_key_here\n  maps:\n    state_map:\n    windc_naics_map:\ndata:\n  state_table:\n    path: path/to/state_data_2024.jld2\n  cps:\n    api: true\n    years:\n      - 2024\n  nipa:\n    api: true\n    years: \n      - 2024\n  acs:\n    api: true\n    years: \n      - 2020\n    requires: cps\n  medicare:\n    api: true\n    min_year: 2009\n    max_year: 2024\n  capital_tax_rates:\n    api: false\n    path: path/to/capital_tax_rates.csv\n  labor_tax_rates:\n    api: false\n    path: path/to/labor_tax_rates.csv\n  income_elasticities:\n    api: false\n    path: path/to/national_income_elasticities_CEX_2013_2017.csv\n  windc_pce_share:\n    api: false\n    path: path/to/windc_pce_map.csv\nmagic_numbers:\n  corporate_rate: .186\n  cbo_wealth_distribution:\n    hh1: 0.025871517\n    hh2: 0.043989237\n    hh3: 0.077542098\n    hh4: 0.147248546\n    hh5: 0.705348602\n  bls_distribution_expenditures:\n    hh1: 25138\n    hh2: 36770\n    hh3: 47664\n    hh4: 64910\n    hh5: 112221","category":"section"},{"location":"data/input_data/#Loading-the-Data","page":"Disaggregation Data","title":"Loading the Data","text":"","category":"section"},{"location":"data/input_data/#WiNDCHousehold.household_raw_data","page":"Disaggregation Data","title":"WiNDCHousehold.household_raw_data","text":"household_raw_data()\nhousehold_raw_data(path::String)\nhousehold_raw_data(info::Dict)\n\nLoad the raw household data based on the provided configuration dictionary.\n\nArguments\n\nIf no arguments are provided, the function loads the configuration from household.yaml  in the current directory. If a path::String is provided, it loads the configuration from the specified path. If a info::Dict is provided, it uses the given configuration dictionary directly.\n\nReturns\n\nThis currently returns a tuple containing:\n\nA State table object\nA WiNDCHousehold.RawHouseholdData object containing all the raw household data.\n\nRaw Data Loaded\n\nWiNDCHousehold.load_cps_data_api\nWiNDCHousehold.load_nipa_data_api\nWiNDCHousehold.load_acs_data_api\nWiNDCHousehold.load_medicare_data_api\nWiNDCHousehold.load_labor_tax_rates\nWiNDCHousehold.load_capital_tax_rates\nWiNDCHousehold.load_cex_income_elasticities\nWiNDCHousehold.load_pce_shares\n\nMaps Loaded\n\nWiNDCHousehold.load_state_fips\nWiNDCHousehold.load_cps_income_categories\n\n\n\n\n\n","category":"function"},{"location":"model/model/#Household-Model","page":"Household Model","title":"Household Model","text":"","category":"section"},{"location":"model/model/#Model-Data","page":"Household Model","title":"Model Data","text":"","category":"section"},{"location":"model/model/#WiNDCHousehold.household_model","page":"Household Model","title":"WiNDCHousehold.household_model","text":"household_model(\n    HH::HouseholdTable;\n    etaK::Real = 4.0,\n    )\n\nConstructs a WiNDCHousehold MPSGE model from a WiNDCHousehold data table.\n\nArguments\n\nHH::HouseholdTable: A WiNDCHousehold data table.\n\nKeyword Arguments\n\netaK::Real = 4.0: Capital transformation elasticity\n\nReturns\n\nM::MPSGEModel: An MPSGE model representing the household sector.\n\nParameters\n\nThe initial values of the parameters are given by parameter_data. The  parameters included in the model are:\n\nOTR[r=states, s=sectors]:  Output tax rate\nTR[r=states, g=commodities]: Tax rate\nDR[r=states, g=commodities]: Duty rate\nTK[r=states, s=sectors]:  Capital tax rate\nFICA[r=states, h=households]:  FICA tax rate\nLTR[r=states, h=households]:  Labor tax rate\n\nIf the model is denoted M, these parameters can be accessed as M[:OTR],  M[:TR], etc. \n\nVariables\n\nSectors\n\nY[r=states, s=sectors]:\" Production\nX[r=states, g=commodities]:\" Disposition\nA[r=states, g=commodities]:\" Absorption\nC[r=states, h=households]:\" Household Consumption\nMS[r=states, m=margins]:\" Margin supply\nLS[r=states, h=households]:\" Labor supply\nKS: Aggregate Capital stock\n\nCommodities\n\nPA[r=states, g=commodities]:\" Regional market (input)\nPC[r=states, h=households]:\" Consumer price index\nPD[r=states, g=commodities]:\" Local market price\nPFX: Foreign exchange\nPK: Aggregate return to capital\nPL[r=states]:\" Wage rate\nPLS[r=states, h=households]:\" Leisure price\nPM[r=states, m=margins]:\" Margin price\nPN[g=commodities]:\" National market\nPY[r=states, g=commodities]:\" Regional market (output)\nRK[r=states, s=sectors]:\" Sectoral rental rate\nRKS: Capital stock\n\nConsumers\n\nRA[r=states, h=households]: Representative agent\nNYSE: Aggregate capital owner\nINVEST: Aggregate investor\nGOVT: Aggregate government\n\nAuxiliaries\n\nAll auxiliaries start with a value of 1. \n\nSAVERATE: Domestic saving rate\nTRANS: Budget balance rationing variable\nSSK: Steady-state capital stock\nCPI: Consumer price index\n\nProduction Blocks\n\nY - Sectoral Production in Each State\n\nWiNDCHousehold.sectoral_output\n\nsectoral_output(HH; output = :DefaultDict) |> Q->\n@production(M, Y[r=states, s=sectors], [t=0, s=0, va=>s=1], begin\n    @output(PY[r,g=commodities], Q[g, s, r, :intermediate_supply],                     t,  taxes = [Tax(GOVT, M[:OTR][r,s])], reference_price = 1-Q[:otr, s, r, :output_tax_rate])\n    @input(PA[r, g=commodities], Q[g, s, r, :intermediate_demand],                     s)\n    @input(PL[r],            sum(Q[l, s, r, :labor_demand] for l in labor_demand),     va)\n    @input(RK[r, s],         sum(Q[k, s, r, :capital_demand] for k in capital_demand), va, taxes = [Tax(GOVT, M[:TK][r,s])], reference_price = 1 + Q[:ktr, s, r, :capital_tax_rate])\nend)\n\nX - Commodity Disposition in Each State\n\nWiNDCHousehold.disposition_data\n\ndisposition_data(HH; output = :DefaultDict) |> Q->\n@production(M, X[r=states, g=commodities], [s=0, t=4], begin\n    @output(PFX,      Q[g, r, :netport],                t)\n    @output(PN[g],    Q[g, r, :region_national_supply], t)\n    @output(PD[r, g], Q[g, r, :region_local_supply],    t)\n    @input(PY[r, g],  Q[g, r, :total_supply],           s)\nend)\n\nA - Armington Commodity Absorption in Each State\n\nWiNDCHousehold.armington_data\n\narmington_data(HH; output = :DefaultDict) |> Q-> \n@production(M, A[r=states, g=commodities], [t=0, s=0, dm => s = 2, d=>dm=4], begin\n    @output(PA[r, g],        Q[g, :abs, r, :absorption],                  t, taxes = [Tax(GOVT, M[:TR][r,g])], reference_price = 1 - Q[g, :tr, r, :tax_rate])\n    @output(PFX,             Q[g, :reexport, r, :reexport],               t)\n    @input(PN[g],            Q[g, :national_demand, r, :national_demand], d)\n    @input(PD[r, g],         Q[g, :local_demand, r, :local_demand],       d)\n    @input(PFX,          sum(Q[g, i, r, :import] for i in imports),       dm, taxes = [Tax(GOVT, M[:DR][r,g])], reference_price = 1 + Q[g, :dr, r, :duty_rate])\n    @input(PM[r, m=margins], Q[g, m, r, :margin_demand],                  s)\nend)\n\nMS - Margin Supply and Demand in Each State\n\nWiNDCHousehold.margin_supply_data\n\nmargin_supply_data(HH; output = :DefaultDict) |> Q->\n@production(M, MS[r=states, m=margins], [t=0, s=0], begin\n    @output(PM[r, m],        sum(Q[g, m, r, :margin_demand] for g in commodities), t)\n    @input(PN[g=commodities],    Q[g, m, r, :national_margin_supply],              s)\n    @input(PD[r, g=commodities], Q[g, m, r, :local_margin_supply],                 s)\nend)\n\nC - Household Consumption in Each State\n\nWiNDCHousehold.consumption_data\n\nconsumption_data(HH; output = :DefaultDict) |> Q->\n@production(M, C[r=states, h=households], [t=0, s=1], begin\n    @output(PC[r, h],        sum(Q[g, h, r, :personal_consumption] for g in commodities), t)\n    @input(PA[r, g=commodities], Q[g, h, r, :personal_consumption],                       s)\nend)\n\nLS - Labor Supply in Each State\n\nWiNDCHousehold.labor_data\n\nlabor_data(HH; output = :DefaultDict) |> Q->\n@production(M, LS[r=states, h=households], [t=0, s=1], begin\n    @output(PL[q=states], Q[q, h, r, :labor_endowment], t, taxes = [Tax(GOVT, M[:LTR][r,h] + M[:FICA][r,h])], reference_price = 1 - Q[:ltr, h, r, :marginal_labor_tax_rate] - Q[:ftr, h, r, :fica_tax_rate])\n    @input(PLS[r, h],     Q[:ls, h, r, :labor_supply], s)\nend)\n\nKS - Capital Stock Transformation\n\nWiNDCHousehold.capital_stock_data\n\ncapital_stock_data(HH; output = :DefaultDict) |> Q->\n@production(M, KS, [t=etaK, s=1], begin\n    @output(RK[r=states, s=sectors], Q[s, r, :capital_demand], t)\n    @input(RKS,                  sum(Q[ss, rr, :capital_demand] for ss in sectors, rr in states), s)\nend)\n\nDemands\n\nRA - Representative Agent Demand in Each State\n\nWiNDCHousehold.representative_agent_data\n\nrepresentative_agent_data(HH; output = :DefaultDict) |> Q->\n@demand(M, RA[r=states, h=households], begin\n    @final_demand(PC[r, h], sum(Q[g, h, r, :personal_consumption] for g in commodities; init=0))\n    @final_demand(PLS[r, h],    Q[:ld, h, r, :leisure_demand])\n    @endowment(PLS[r, h],       Q[:ld, h, r, :leisure_demand] + Q[:ls, h, r, :labor_supply])\n    @endowment(PFX,         sum(Q[trn, h, r, :transfer_payment] for trn in transfers; init=0))\n    @endowment(PLS[r, h],   (M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))\n    @endowment(PK,              Q[:interest, h, r, :household_interest])\n    @endowment(PFX,            -Q[:savings, h, r, :savings]*SAVERATE)\nend, elasticity = Q[:els, h, r, :leisure_consumption_elasticity])\n\nNYSE - Aggregate Capital Owner Demand\n\nWiNDCHousehold.NYSE_data\n\nNYSE_data(HH; output = :DefaultDict) |> Q->\n@demand(M, NYSE, begin\n    @final_demand(PK,                       sum(Q[row, col, r, :household_supply] for row in commodities, col in personal_consumption, r in states; init=0) + sum(Q[row, col, r, :capital_demand] for row in capital_demand, col in sectors, r in states; init=0))\n    @endowment(PY[r=states, g=commodities], sum(Q[g, col, r, :household_supply] for col in personal_consumption; init=0))\n    @endowment(RKS,                         sum(Q[k, s, r, :capital_demand] for k in capital_demand, s in sectors, r in states;init=0)*SSK)\nend)\n\nINVEST - Aggregate Investor Demand\n\nWiNDCHousehold.invest_data\n\ninvest_data(HH; output = :DefaultDict) |> Q->\n@demand(M, INVEST, begin\n    @final_demand(PA[r=states, g=commodities], Q[g, :invest, r, :investment_final_demand])\n    @endowment(PFX,                        sum(Q[:savings, h, r, :savings] for h in households, r in states; init=0)*SAVERATE)\n    @endowment(PFX, 0) # fsav0\nend)\n\nGOVT - Aggregate Government Demand\n\nWiNDCHousehold.government_data\n\ngovernment_data(HH; output = :DefaultDict) |> Q->\n@demand(M, GOVT, begin\n    @final_demand(PA[r=states, g=commodities], Q[g, :govern, r, :government_final_demand])\n    @endowment(PFX,                 -TRANS*sum(Q[trn, h, r, :transfer_payment] for trn in transfers, h in households, r in states; init=0))\n    @endowment(PFX,                            Q[:gd, :gd, :gd, :government_deficit])\n    @endowment(PLS[r=states, h=households], -(M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))\nend)\n\nAuxiliary Constraints\n\nSSK - Steady-State Capital Stock Constraint\n\nWiNDCHousehold.ssk_data\n\nssk_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, SSK, \n    sum(Q[g, :invest, r, :investment_final_demand]*(PA[r,g]-RKS) for g in commodities, r in states)\n)\n\nSAVERATE - Domestic Saving Rate Constraint\n\nWiNDCHousehold.saverate_data\n\nsaverate_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, SAVERATE, \n    INVEST - sum(Q[g, :invest, r, :investment_final_demand]*PA[r,g]*SSK for g in commodities, r in states)\n)\n\nTRANS - Budget Balance Rationing Variable Constraint\n\nWiNDCHousehold.trans_data\n\ntrans_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, TRANS,\n    GOVT - sum(PA[r,g]*Q[g, :govern, r, :government_final_demand] for g in commodities, r in states)\n)\n\nCPI - Consumer Price Index Constraint\n\nWiNDCHousehold.cpi_data\n\ncpi_data(HH; output = :DefaultDict) |> Q->\n@aux_constraint(M, CPI,\n    CPI - sum(PC[r,h]*Q[h, r, :personal_consumption] for h in households, r in states)/ sum(Q[h, r, :personal_consumption] for h in households, r in states; init=0)\n)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.parameter_data","page":"Household Model","title":"WiNDCHousehold.parameter_data","text":"parameter_data(data::T; output = :DataFrame) where T<:AbstractHouseholdTable\n\nReturns initial parameter data for the household model.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\nvcat(\n    output_tax_rate(data),\n    tax_rate(data),\n    duty_rate(data),\n    capital_tax_rate(data),\n    fica_tax_rate(data),\n    marginal_labor_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.output_tax_rate\nWiNDCHousehold.tax_rate\nWiNDCHousehold.duty_rate\nWiNDCHousehold.capital_tax_rate\nWiNDCHousehold.fica_tax_rate\nWiNDCHousehold.marginal_labor_tax_rate\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.sectoral_output","page":"Household Model","title":"WiNDCHousehold.sectoral_output","text":"sectoral_output(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts sectoral output-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the sectoral output data.\n\nData\n\nvcat(\n    table(data, \n        :Intermediate_Supply, \n        :Intermediate_Demand, \n        :Labor_Demand, \n        :Capital_Demand;\n        normalize = :Use\n        ),\n    output_tax_rate(data),\n    capital_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.output_tax_rate\nWiNDCHousehold.capital_tax_rate\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.disposition_data","page":"Household Model","title":"WiNDCHousehold.disposition_data","text":"disposition_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts disposition-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        regional_local_supply(data),\n        netports(data),\n        total_supply(data),\n        regional_national_supply(data)\n        )\n\nAggregate Data\n\nWiNDCHousehold.regional_local_supply\nWiNDCHousehold.netports\nWiNDCHousehold.total_supply\nWiNDCHousehold.regional_national_supply\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.armington_data","page":"Household Model","title":"WiNDCHousehold.armington_data","text":"armington_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts Armington-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        absorption(data; normalize = true),\n        table(data, :Reexport, :National_Demand, :Local_Demand, :Import, :Margin_Demand; normalize = :Use),\n        tax_rate(data),\n        duty_rate(data)\n    )\n\nAggregate data\n\nWiNDCHousehold.absorption\nWiNDCHousehold.tax_rate\nWiNDCHousehold.duty_rate\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.margin_supply_data","page":"Household Model","title":"WiNDCHousehold.margin_supply_data","text":"margin_supply_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts margin supply and demand parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Margin_Demand, :Margin_Supply; normalize = :Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.consumption_data","page":"Household Model","title":"WiNDCHousehold.consumption_data","text":"consumption_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts consumption-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Personal_Consumption; normalize = :Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.labor_data","page":"Household Model","title":"WiNDCHousehold.labor_data","text":"labor_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts leisure-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n   vcat(\n        table(data, :Labor_Endowment),\n        WiNDCHousehold.labor_supply(data),\n        WiNDCHousehold.marginal_labor_tax_rate(data),\n        WiNDCHousehold.fica_tax_rate(data)\n    )\n\nAggregate Data\n\nWiNDCHousehold.labor_supply\nWiNDCHousehold.marginal_labor_tax_rate\nWiNDCHousehold.fica_tax_rate\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.capital_stock_data","page":"Household Model","title":"WiNDCHousehold.capital_stock_data","text":"capital_stock_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts capital stock-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, :Capital_Demand; normalize = :Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.representative_agent_data","page":"Household Model","title":"WiNDCHousehold.representative_agent_data","text":"representative_agent_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts representative agent-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        leisure_consumption_elasticity(data),\n        average_labor_tax_rate(data),\n        labor_supply(data),\n        leisure_demand(data),\n        table(data, \n            :Personal_Consumption,\n            :Household_Interest,\n            :Transfer_Payment,\n            :Savings,\n            :Labor_Endowment;\n            normalize=:Use\n        )\n    )\n\nAggregate Data\n\nWiNDCHousehold.leisure_consumption_elasticity\nWiNDCHousehold.average_labor_tax_rate\nWiNDCHousehold.labor_supply\nWiNDCHousehold.leisure_demand\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.NYSE_data","page":"Household Model","title":"WiNDCHousehold.NYSE_data","text":"NYSE_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts NYSE-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, \n        :Household_Supply,\n        :Capital_Demand;\n        normalize=:Use\n    )\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.invest_data","page":"Household Model","title":"WiNDCHousehold.invest_data","text":"invest_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts investment-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(data, \n        :Investment_Final_Demand,\n        :Savings;\n        normalize=:Use\n    )\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.government_data","page":"Household Model","title":"WiNDCHousehold.government_data","text":"government_data(data::T, output = :DataFrame) where T<:AbstractHouseholdTable\n\nExtracts government-related parameters from the regional data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    vcat(\n        table(data, \n            :Government_Final_Demand,\n            :Transfer_Payment,\n            :Labor_Endowment;\n            normalize=:Use\n        ),\n        WiNDCHousehold.government_deficit(data),\n        WiNDCHousehold.average_labor_tax_rate(data),\n    )\n\nAggregate Data\n\nWiNDCHousehold.government_deficit\nWiNDCHousehold.average_labor_tax_rate\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.ssk_data","page":"Household Model","title":"WiNDCHousehold.ssk_data","text":"ssk_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts steady-state capital stock-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Investment_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.saverate_data","page":"Household Model","title":"WiNDCHousehold.saverate_data","text":"saverate_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts saving rate-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Investment_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.trans_data","page":"Household Model","title":"WiNDCHousehold.trans_data","text":"trans_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts transfer-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Government_Final_Demand; normalize=:Use)\n\n\n\n\n\n","category":"function"},{"location":"model/model/#WiNDCHousehold.cpi_data","page":"Household Model","title":"WiNDCHousehold.cpi_data","text":"cpi_data(HH::HouseholdTable; output = :DataFrame)\n\nExtracts consumer price index-related parameters from the household data table.\n\nArguments\n\ndata::T: A WiNDCHousehold data table.\n\nKeyword Arguments\n\noutput::Symbol = :DataFrame: The output format, either :DataFrame or :DefaultDict.\n\nReturns\n\nA DataFrame or DefaultDict containing the parameter data.\n\nData\n\n    table(HH, :Personal_Consumption; normalize=:Use) |>\n        x -> groupby(x, [:col, :region, :parameter]) |>\n        x -> combine(x, :value => sum => :value)\n\n\n\n\n\n","category":"function"},{"location":"#WiNDCHousehold","page":"WiNDCHousehold","title":"WiNDCHousehold","text":"This is a disaggregation of the WiNDCRegional dataset to include household-level detail. \n\nThis package is under active development. For quick start instructions, see the Quick Start section.\n\nThis disaggregation is currently limited to 2024. We plan to expand to the years 1997-2024 soon.","category":"section"}]
}
