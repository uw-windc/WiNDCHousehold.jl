<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · WiNDCHousehold.jl</title><meta name="title" content="API Reference · WiNDCHousehold.jl"/><meta property="og:title" content="API Reference · WiNDCHousehold.jl"/><meta property="twitter:title" content="API Reference · WiNDCHousehold.jl"/><meta name="description" content="Documentation for WiNDCHousehold.jl."/><meta property="og:description" content="Documentation for WiNDCHousehold.jl."/><meta property="twitter:description" content="Documentation for WiNDCHousehold.jl."/><meta property="og:url" content="https://github.com/uw-windc/WiNDCHousehold.jl/api/"/><meta property="twitter:url" content="https://github.com/uw-windc/WiNDCHousehold.jl/api/"/><link rel="canonical" href="https://github.com/uw-windc/WiNDCHousehold.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">WiNDCHousehold.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../">WiNDCHousehold</a></li><li><a class="tocitem" href="../quick_start/">Quick Start</a></li></ul></li><li><span class="tocitem">Data</span><ul><li><a class="tocitem" href="../data/input_data/">Disaggregation Data</a></li><li><a class="tocitem" href="../data/sets/">Household Data Sets</a></li></ul></li><li><span class="tocitem">Model</span><ul><li><a class="tocitem" href="../model/model/">Household Model</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li class="is-active"><a class="tocitem" href>API Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/uw-windc/WiNDCHousehold.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><ul><li><a href="#WiNDCHousehold.HouseholdTable"><code>WiNDCHousehold.HouseholdTable</code></a></li><li><a href="#WiNDCHousehold.RawHouseholdData"><code>WiNDCHousehold.RawHouseholdData</code></a></li><li><a href="../model/model/#WiNDCHousehold.NYSE_data"><code>WiNDCHousehold.NYSE_data</code></a></li><li><a href="#WiNDCHousehold.NYSE_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.NYSE_data</code></a></li><li><a href="#WiNDCHousehold.absorption-Tuple{HouseholdTable}"><code>WiNDCHousehold.absorption</code></a></li><li><a href="#WiNDCHousehold.adjust_capital_demand-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjust_capital_demand</code></a></li><li><a href="#WiNDCHousehold.adjusted_capital_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_capital_income</code></a></li><li><a href="#WiNDCHousehold.adjusted_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_consumption</code></a></li><li><a href="#WiNDCHousehold.adjusted_wages-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_wages</code></a></li><li><a href="#WiNDCHousehold.aggregate_transfer_payment-Tuple{HouseholdTable}"><code>WiNDCHousehold.aggregate_transfer_payment</code></a></li><li><a href="../model/model/#WiNDCHousehold.armington_data"><code>WiNDCHousehold.armington_data</code></a></li><li><a href="#WiNDCHousehold.armington_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.armington_data</code></a></li><li><a href="#WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.average_labor_tax_rate</code></a></li><li><a href="#WiNDCHousehold.build_household_table-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.build_household_table</code></a></li><li><a href="#WiNDCHousehold.calibration_model_1-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.calibration_model_1</code></a></li><li><a href="#WiNDCHousehold.calibration_model_2-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.calibration_model_2</code></a></li><li><a href="#WiNDCHousehold.capital_stock_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.capital_stock_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.capital_stock_data"><code>WiNDCHousehold.capital_stock_data</code></a></li><li><a href="#WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.capital_tax_rate</code></a></li><li><a href="#WiNDCHousehold.clean_aggregate_medi_data-Tuple{DataFrames.DataFrame}"><code>WiNDCHousehold.clean_aggregate_medi_data</code></a></li><li><a href="#WiNDCHousehold.compute_economy_wide_savings-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.compute_economy_wide_savings</code></a></li><li><a href="#WiNDCHousehold.compute_savings_markup_consumption-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_consumption</code></a></li><li><a href="#WiNDCHousehold.compute_savings_markup_save-Tuple{HouseholdTable, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_save</code></a></li><li><a href="#WiNDCHousehold.compute_savings_rate-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_rate</code></a></li><li><a href="../model/model/#WiNDCHousehold.consumption_data"><code>WiNDCHousehold.consumption_data</code></a></li><li><a href="#WiNDCHousehold.consumption_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.consumption_data</code></a></li><li><a href="#WiNDCHousehold.cpi_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.cpi_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.cpi_data"><code>WiNDCHousehold.cpi_data</code></a></li><li><a href="#WiNDCHousehold.cps_income-Tuple{Dict}"><code>WiNDCHousehold.cps_income</code></a></li><li><a href="#WiNDCHousehold.cps_numhh-Tuple{Dict}"><code>WiNDCHousehold.cps_numhh</code></a></li><li><a href="#WiNDCHousehold.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>WiNDCHousehold.cps_vs_nipa_income_categories</code></a></li><li><a href="#WiNDCHousehold.create_household_transfers-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.create_household_transfers</code></a></li><li><a href="#WiNDCHousehold.create_personal_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.create_personal_consumption</code></a></li><li><a href="../model/model/#WiNDCHousehold.disposition_data"><code>WiNDCHousehold.disposition_data</code></a></li><li><a href="#WiNDCHousehold.disposition_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.disposition_data</code></a></li><li><a href="#WiNDCHousehold.duty_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.duty_rate</code></a></li><li><a href="#WiNDCHousehold.fetch_zip_data-Tuple{String, Function}"><code>WiNDCHousehold.fetch_zip_data</code></a></li><li><a href="#WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.fica_tax_rate</code></a></li><li><a href="#WiNDCHousehold.get_capital_ownership-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.get_capital_ownership</code></a></li><li><a href="#WiNDCHousehold.get_cps_data-NTuple{4, Any}"><code>WiNDCHousehold.get_cps_data</code></a></li><li><a href="#WiNDCHousehold.get_cps_data_api-Tuple{Any, Any, Any}"><code>WiNDCHousehold.get_cps_data_api</code></a></li><li><a href="#WiNDCHousehold.government_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.government_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.government_data"><code>WiNDCHousehold.government_data</code></a></li><li><a href="#WiNDCHousehold.government_deficit-Tuple{HouseholdTable}"><code>WiNDCHousehold.government_deficit</code></a></li><li><a href="#WiNDCHousehold.household_labels-Tuple{Real}"><code>WiNDCHousehold.household_labels</code></a></li><li><a href="#WiNDCHousehold.household_model-Tuple{HouseholdTable}"><code>WiNDCHousehold.household_model</code></a></li><li><a href="../model/model/#WiNDCHousehold.household_model"><code>WiNDCHousehold.household_model</code></a></li><li><a href="#WiNDCHousehold.household_raw_data-Tuple{Dict}"><code>WiNDCHousehold.household_raw_data</code></a></li><li><a href="../data/input_data/#WiNDCHousehold.household_raw_data"><code>WiNDCHousehold.household_raw_data</code></a></li><li><a href="#WiNDCHousehold.initial_transfer_payments-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.initial_transfer_payments</code></a></li><li><a href="#WiNDCHousehold.initialize_table-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.initialize_table</code></a></li><li><a href="../model/model/#WiNDCHousehold.invest_data"><code>WiNDCHousehold.invest_data</code></a></li><li><a href="#WiNDCHousehold.invest_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.invest_data</code></a></li><li><a href="#WiNDCHousehold.labor_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.labor_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.labor_data"><code>WiNDCHousehold.labor_data</code></a></li><li><a href="#WiNDCHousehold.labor_endowment_multiplier-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.labor_endowment_multiplier</code></a></li><li><a href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a></li><li><a href="#WiNDCHousehold.leisure_consumption_elasticity-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_consumption_elasticity</code></a></li><li><a href="#WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_demand</code></a></li><li><a href="#WiNDCHousehold.load_acs_data_api-Tuple{Dict}"><code>WiNDCHousehold.load_acs_data_api</code></a></li><li><a href="#WiNDCHousehold.load_acs_medicare_data-Tuple{String}"><code>WiNDCHousehold.load_acs_medicare_data</code></a></li><li><a href="#WiNDCHousehold.load_capital_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_capital_tax_rates</code></a></li><li><a href="#WiNDCHousehold.load_cex_income_elasticities-Tuple{String}"><code>WiNDCHousehold.load_cex_income_elasticities</code></a></li><li><a href="#WiNDCHousehold.load_cps_data-Tuple{Dict}"><code>WiNDCHousehold.load_cps_data</code></a></li><li><a href="#WiNDCHousehold.load_cps_income_categories-Tuple{}"><code>WiNDCHousehold.load_cps_income_categories</code></a></li><li><a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a></li><li><a href="#WiNDCHousehold.load_labor_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_labor_tax_rates</code></a></li><li><a href="#WiNDCHousehold.load_medicare_data-Tuple{String}"><code>WiNDCHousehold.load_medicare_data</code></a></li><li><a href="#WiNDCHousehold.load_medicare_data_api-Tuple{String}"><code>WiNDCHousehold.load_medicare_data_api</code></a></li><li><a href="#WiNDCHousehold.load_nipa_data_api-Tuple{Vector{Int64}, Any}"><code>WiNDCHousehold.load_nipa_data_api</code></a></li><li><a href="#WiNDCHousehold.load_pce_shares-Tuple{String}"><code>WiNDCHousehold.load_pce_shares</code></a></li><li><a href="#WiNDCHousehold.load_state_fips-Tuple{}"><code>WiNDCHousehold.load_state_fips</code></a></li><li><a href="#WiNDCHousehold.load_windc_naics_map-Tuple{}"><code>WiNDCHousehold.load_windc_naics_map</code></a></li><li><a href="../model/model/#WiNDCHousehold.margin_supply_data"><code>WiNDCHousehold.margin_supply_data</code></a></li><li><a href="#WiNDCHousehold.margin_supply_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.margin_supply_data</code></a></li><li><a href="#WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.marginal_labor_tax_rate</code></a></li><li><a href="#WiNDCHousehold.netports-Tuple{HouseholdTable}"><code>WiNDCHousehold.netports</code></a></li><li><a href="#WiNDCHousehold.nipa_fringe_benefit_markup-Tuple{DataFrames.DataFrame}"><code>WiNDCHousehold.nipa_fringe_benefit_markup</code></a></li><li><a href="#WiNDCHousehold.other_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.other_income</code></a></li><li><a href="#WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.output_tax_rate</code></a></li><li><a href="../model/model/#WiNDCHousehold.parameter_data"><code>WiNDCHousehold.parameter_data</code></a></li><li><a href="#WiNDCHousehold.parameter_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.parameter_data</code></a></li><li><a href="#WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_local_supply</code></a></li><li><a href="#WiNDCHousehold.regional_national_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_national_supply</code></a></li><li><a href="#WiNDCHousehold.representative_agent_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.representative_agent_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.representative_agent_data"><code>WiNDCHousehold.representative_agent_data</code></a></li><li><a href="#WiNDCHousehold.retrieve_cps_data-Tuple{Int64, Dict}"><code>WiNDCHousehold.retrieve_cps_data</code></a></li><li><a href="#WiNDCHousehold.saverate_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.saverate_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.saverate_data"><code>WiNDCHousehold.saverate_data</code></a></li><li><a href="#WiNDCHousehold.sectoral_output-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.sectoral_output</code></a></li><li><a href="../model/model/#WiNDCHousehold.sectoral_output"><code>WiNDCHousehold.sectoral_output</code></a></li><li><a href="#WiNDCHousehold.ssk_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.ssk_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.ssk_data"><code>WiNDCHousehold.ssk_data</code></a></li><li><a href="#WiNDCHousehold.tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.tax_rate</code></a></li><li><a href="#WiNDCHousehold.total_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.total_supply</code></a></li><li><a href="#WiNDCHousehold.trans_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.trans_data</code></a></li><li><a href="../model/model/#WiNDCHousehold.trans_data"><code>WiNDCHousehold.trans_data</code></a></li><li><a href="#WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.transfer_weights</code></a></li><li><a href="#WiNDCHousehold.windc_vs_nipa_income_categories-Tuple{WiNDCRegional.State, DataFrames.DataFrame}"><code>WiNDCHousehold.windc_vs_nipa_income_categories</code></a></li></ul><article><details class="docstring" open="true"><summary id="WiNDCHousehold.HouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.HouseholdTable"><code>WiNDCHousehold.HouseholdTable</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Household</code></pre><p>The primary container for WiNDC household disaggregation data tables. There are  three fields, all dataframes:</p><ul><li><code>data</code>: The main data table.</li><li><code>sets</code>: The sets table, describing the different sets used in the model.</li><li><code>elements</code>: The elements table, describing the different elements in the model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/structs.jl#L8-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.RawHouseholdData"><a class="docstring-binding" href="#WiNDCHousehold.RawHouseholdData"><code>WiNDCHousehold.RawHouseholdData</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RawHouseholdData
RawHouseholdData(
    state_table::WiNDCRegional.State,
    cps::Dict{Symbol,DataFrame},
    nipa::DataFrame,
    acs::DataFrame,
    medicare::DataFrame,
    labor_tax_rates::DataFrame,
    cex_income_elasticities::DataFrame,
    pce_shares::DataFrame,
    capital_tax_rates::DataFrame;
    state_fips = WiNDCHousehold.load_state_fips(),
    income_categories = WiNDCHousehold.load_cps_income_categories(),
    state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation]),
)</code></pre><p>A container for all raw data used in WiNDCHousehold processing.</p><p><strong>Fields</strong></p><ul><li><code>state_fips::DataFrame</code>: State FIPS codes.</li><li><code>income_categories::DataFrame</code>: Income category mappings.</li><li><code>state_abbreviations::DataFrame</code>: State abbreviations.</li><li><code>income::DataFrame</code>: CPS income data.</li><li><code>numhh::DataFrame</code>: CPS number of households data.</li><li><code>nipa::DataFrame</code>: NIPA data.</li><li><code>acs_commute::DataFrame</code>: ACS commute data.</li><li><code>medicare::DataFrame</code>: Medicare data.</li><li><code>labor_tax_rates::DataFrame</code>: Labor tax rates.</li><li><code>capital_tax_rates::DataFrame</code>: Capital tax rates.</li><li><code>nipa_cps::DataFrame</code>: NIPA vs CPS income categories mapping.</li><li><code>windc_vs_nipa_income_categories::DataFrame</code>: WiNDC vs NIPA income categories mapping.</li><li><code>nipa_fringe::DataFrame</code>: NIPA fringe benefit markup data.</li><li><code>cps_data::DataFrame</code>: Processed CPS data.</li><li><code>cex_income_elasticities::DataFrame</code>: CEX income elasticities data.</li><li><code>pce_shares::DataFrame</code>: PCE shares data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/structs.jl#L25-L62">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.NYSE_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.NYSE_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.NYSE_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">NYSE_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts NYSE-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(data, 
        :Household_Supply,
        :Capital_Demand;
        normalize=:Use
    )</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L941-L967">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.absorption-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.absorption-Tuple{HouseholdTable}"><code>WiNDCHousehold.absorption</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">absorption(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter::Symbol = :absorption,
    normalize::Bool = false
)</code></pre><p>Calculate the absorption for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:absorption</code>).</li><li><code>normalize::Bool</code>: Flip the resulting sign of the data (default is <code>false</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:abs</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:absorption</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p>!!!note &quot;Negative Values     Absorption is a demand-side value, which means the resulting values will be      negative. If you wish to have positive values, set the <code>normalize</code> argument to <code>true</code>.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Intermediate_Demand</code></li><li><code>Other_Final_Demand</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Absorption} = \sum_{\rm sectors} {\rm Intermediate\_Demand}} + \sum_{\rm other\_final\_demand}{{\rm Other\_Final\_Demand}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L122-L170">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.adjust_capital_demand-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.adjust_capital_demand-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjust_capital_demand</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">adjust_capital_demand(
    HH::HouseholdTable,
    state_table::State,
    raw_data::RawHouseholdData;
)</code></pre><p>Convert gross capital demand in the <code>state_table</code> to net capital demand by removing the capital tax based on state-level capital tax rates provided in <code>raw_data</code>.</p><p class="math-container">\[    {\rm Net\ Capital\ Demand} = \frac{\rm Gross\ Capital\ Demand}{1 + r}\]</p><p><strong>Raw Data</strong></p><ul><li><code>raw_data.capital_tax_rates</code> (State-level capital tax rates)</li></ul><p><strong>Parameters Disaggregated</strong></p><ul><li><code>Capital_Demand</code></li></ul><p><strong>Sets Added</strong></p><ul><li><code>capital_tax</code> <ul><li>Domain: <code>row</code></li><li>Description: &quot;Capital Tax&quot;</li><li>Elements: <code>cap_tax</code></li></ul></li><li><code>Capital_Tax</code> - From <code>state_table</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L190-L219">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.adjusted_capital_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.adjusted_capital_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_capital_income</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">adjusted_capital_income(
    HH::HouseholdTable,
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the adjusted capital income for each household in <code>HH</code> based on capital ownership and total capital demand.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>adjusted_capital::DataFrame</code>: A DataFrame with columns <code>:hh</code>, <code>:year</code>, <code>:state</code>, and <code>:capital</code> representing the adjusted capital income for each household.</li></ul><p><strong>Computation</strong></p><p>The adjusted capital income is computed using the formula:</p><p class="math-container">\[    {\rm Adjusted\ Capital\ Income} = {\rm Capital\ Ownership\ Share} \cdot {\rm Total\ Capital\ Demand} \cdot \frac{{\rm Interest\ Income}}{\sum_{hh}{\rm Interest\ Income}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L779-L807">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.adjusted_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.adjusted_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_consumption</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">adjusted_consumption(
    HH::HouseholdTable,
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the adjusted consumption for each household in <code>HH</code> based on consumption shares, personal consumption from <code>state_table</code>, and the household savings rate.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>adjusted_consumption::DataFrame</code>: A DataFrame with columns <code>:hh</code>, <code>:year</code>, <code>:state</code>, and <code>:consumption</code> representing the adjusted consumption for each household.</li></ul><p><strong>Computation</strong></p><p>The adjusted consumption is computed using the formula:</p><p class="math-container">\[    {\rm Adjusted\ Consumption} = \frac{{\rm Consumption\ Share} \cdot {\rm Personal\ Consumption}}{1 - {\rm Savings\ Rate}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L522-L550">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.adjusted_wages-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.adjusted_wages-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_wages</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">adjusted_wages(
    HH::HouseholdTable,
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData;
    tax_adjustment::Bool = true
)</code></pre><p>Compute the adjusted wages for each household in <code>HH</code> based on labor endowment multipliers and labor tax rates.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data and labor tax rates.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>tax_adjustment::Bool = true</code>: Whether to apply labor tax adjustments.</li></ul><p><strong>Returns</strong></p><ul><li><code>adjusted_wages::DataFrame</code>: A DataFrame with columns <code>:hh</code>, <code>:year</code>, <code>:state</code>, and <code>:wage</code> representing the adjusted wages for each household.</li></ul><p><strong>Computation</strong></p><p>The adjusted wages are computed using the formula:</p><p class="math-container">\[    {\rm Adjusted\ Wage} = {\rm Wage\ Share} \cdot ({\rm tax\ adjustment}\cdot {\rm Labor\ Tax\ Rate} - 1) \cdot {\rm Labor\ Endowment\ Multiplier} \cdot \sum_{sectors}{\rm Labor\ Demand}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L693-L726">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.aggregate_transfer_payment-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.aggregate_transfer_payment-Tuple{HouseholdTable}"><code>WiNDCHousehold.aggregate_transfer_payment</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">aggregate_transfer_payment(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :total_transfers,
)</code></pre><p>Aggregate the transfer payments for each household type in each region.</p><p><strong>Required Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol = :value</code>: The column to be used for the aggregation.</li><li><code>output::Symbol = :value</code>: The name of the output column.</li><li><code>parameter::Symbol =</code>:total_transfers`: The name of the parameter column.</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:tt</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:total_transfers</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Transfer_Payment</code></li></ul><p><strong>Calculation</strong></p><p>The total transfer payments are calculated as:</p><p class="math-container">\[{\rm Total\_Transfers} = \sum_{\rm transfers} {\rm Transfer\_Payment}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L933-L976">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.armington_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.armington_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.armington_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">armington_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts Armington-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    vcat(
        absorption(data; normalize = true),
        table(data, :Reexport, :National_Demand, :Local_Demand, :Import, :Margin_Demand; normalize = :Use),
        tax_rate(data),
        duty_rate(data)
    )</code></pre><p><strong>Aggregate data</strong></p><ul><li><a href="#WiNDCHousehold.absorption-Tuple{HouseholdTable}"><code>WiNDCHousehold.absorption</code></a></li><li><a href="#WiNDCHousehold.tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.tax_rate</code></a></li><li><a href="#WiNDCHousehold.duty_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.duty_rate</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L640-L673">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.average_labor_tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">average_labor_tax_rate(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :average_labor_tax_rate,
)</code></pre><p>Calculate the average labor tax rate for each household type in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:average_labor_tax_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:altr</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:average<em>labor</em>tax_rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Average_Labor_Tax</code></li><li><code>Labor_Endowment</code></li></ul><p><strong>Calculation</strong></p><p>The average labor tax rate is calculated as:</p><p class="math-container">\[{\rm Average\_Labor\_Tax\_Rate} = \frac{\rm Average\_Labor\_Tax}{\sum_{\rm Destinations} \rm Labor\_Endowment}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L730-L774">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.build_household_table-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.build_household_table-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.build_household_table</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">build_household_table(
        state_table::State,
        raw_data::RawHouseholdData;
    )</code></pre><p>Build a <code>HouseholdTable</code> from the given <code>state_table</code> and <code>raw_data</code>.</p><p><strong>Disaggregation Steps</strong></p><p>The disaggregation is performed through the following steps:</p><ol><li><a href="#WiNDCHousehold.initialize_table-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.initialize_table</code></a></li><li><a href="#WiNDCHousehold.adjust_capital_demand-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjust_capital_demand</code></a></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L147-L162">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.calibration_model_1-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.calibration_model_1-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.calibration_model_1</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">calibration_model_1(HH::HouseholdTable, state_table::State, HH_Raw_Data::RawHouseholdData)</code></pre><p>This is a placeholder docstring. It has been intentionally left blank as this model can be simplified further.</p><p>To Do:</p><ol><li>Add errors if model fails to solve</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/calibration_model_1.jl#L1-L10">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.calibration_model_2-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><a class="docstring-binding" href="#WiNDCHousehold.calibration_model_2-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.calibration_model_2</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">calibration_model_2(
    HH::HouseholdTable, 
    state_table::State, 
    HH_Raw_Data::RawHouseholdData,
    calibration_model_1::JuMP.Model
)</code></pre><p>This is a placeholder docstring. It has been intentionally left blank as this model can be simplified further.</p><p>To Do:</p><ol><li>Add errors if model fails to solve</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/calibration_model_2.jl#L1-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.capital_stock_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.capital_stock_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.capital_stock_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">capital_stock_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts capital stock-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(data, :Capital_Demand; normalize = :Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L829-L851">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.capital_tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">capital_tax_rate(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :capital_tax_rate,
)</code></pre><p>Calculate the capital tax rate for each household type in each region. The capital tax rate is defined as the ratio of <code>Capital_Tax</code> to <code>Capital_Demand</code>.</p><p><strong>Required Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol = :value</code>: The column to be used for the calculation.</li><li><code>output::Symbol = :value</code>: The name of the output column.</li><li><code>parameter::Symbol =</code>:capital<em>tax</em>rate`: The name of the parameter column.</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:ktr</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:capital<em>tax</em>rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Capital_Tax</code></li><li><code>Capital_Demand</code></li></ul><p><strong>Calculation</strong></p><p>The capital tax rate is calculated as:</p><p class="math-container">\[{\rm Capital\_Tax\_Rate} = \frac{\rm Capital\_Tax}{\rm Capital\_Demand}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L863-L908">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.clean_aggregate_medi_data-Tuple{DataFrames.DataFrame}"><a class="docstring-binding" href="#WiNDCHousehold.clean_aggregate_medi_data-Tuple{DataFrames.DataFrame}"><code>WiNDCHousehold.clean_aggregate_medi_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">clean_aggregate_medi_data(df::DataFrame)</code></pre><p>Cleans Medicare or Medicaid aggregate data DataFrame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/medicare.jl#L61-L65">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.compute_economy_wide_savings-Tuple{WiNDCRegional.State}"><a class="docstring-binding" href="#WiNDCHousehold.compute_economy_wide_savings-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.compute_economy_wide_savings</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">compute_economy_wide_savings(
        state_table::WiNDCRegional.State
    )</code></pre><p>Compute the economy-wide savings rate based on personal consumption and investment from the <code>state_table</code>.</p><p><strong>Returns</strong></p><ul><li><code>economy_wide_savings::DataFrame</code>: A DataFrame with columns <code>:year</code> and <code>:economy_wide_sr0</code> representing the economy-wide savings rate for each year.</li></ul><p><strong>Computation</strong></p><p class="math-container">\[    {\rm Economy\ Wide\ Savings\ Rate} = \frac{\rm Investment\ Final\ Demand}{\rm Personal\ Consumption + Investment\ Final\ Demand}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L267-L285">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.compute_savings_markup_consumption-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.compute_savings_markup_consumption-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_consumption</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">compute_savings_markup_consumption(
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the savings markup based on personal consumption from the <code>state_table</code> and CPS data in <code>raw_data</code>.</p><p><strong>Arguments</strong></p><ul><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>savings_markup_consumption::Float64</code>: The computed savings markup based on consumption.</li></ul><p><strong>Computation</strong></p><p class="math-container">\[    {\rm Savings\ Markup} = \frac{\rm Total\  Personal\ Consumption}{\rm Total\ Consumption}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L398-L421">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.compute_savings_markup_save-Tuple{HouseholdTable, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.compute_savings_markup_save-Tuple{HouseholdTable, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_save</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">savings_markup_save(
    HH::HouseholdTable,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the savings markup for the household table <code>HH</code> based on the raw CPS data in <code>raw_data</code>.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>savings_markup_save::Float64</code>: The computed savings markup.</li></ul><p><strong>Raw Data Used</strong></p><ul><li><code>raw_data.cps_data</code> (CPS interest data)</li><li><a href="#WiNDCHousehold.get_capital_ownership-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.get_capital_ownership</code></a></li></ul><p><strong>Computation</strong></p><p class="math-container">\[    {\rm Savings\ Markup} = \frac{\rm  Gross\ Capital\ Demand}{\rm Total\ Interest}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L347-L375">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.compute_savings_rate-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.compute_savings_rate-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">compute_savings_rate(
        HH::HouseholdTable,
        state_table::WiNDCRegional.State,
        raw_data::RawHouseholdData
    )</code></pre><p>Compute the savings rate for each household in <code>HH</code> based on the economy-wide savings rate and the household&#39;s interest income and consumption.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>savings_rate::DataFrame</code>: A DataFrame with columns <code>:hh</code>, <code>:year</code>, <code>:state</code>, and <code>:save_rate</code> representing the savings rate for each household.</li></ul><p><strong>Computation</strong></p><p>This computation is broken into several steps:</p><ol><li>Compute the economy-wide savings rate using <a href="#WiNDCHousehold.compute_economy_wide_savings-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.compute_economy_wide_savings</code></a>.</li><li>Compute the savings markup for savings and consumption using:<ul><li><a href="#WiNDCHousehold.compute_savings_markup_save-Tuple{HouseholdTable, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_save</code></a> and </li><li><a href="#WiNDCHousehold.compute_savings_markup_consumption-Tuple{WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.compute_savings_markup_consumption</code></a>.</li></ul></li><li>Calculate the interest shares and total shares for each household.</li><li>Finally, compute the savings rate for each household using the formula:</li></ol><p class="math-container">\[    {\rm Savings\ Rate}_{hh} = \frac{\rm (Economy\ Wide\ Savings\ Rate) \cdot (Interest\ Share)}{Total\ Share}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L435-L471">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.consumption_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.consumption_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.consumption_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">consumption_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts consumption-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(data, :Personal_Consumption; normalize = :Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L734-L756">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.cpi_data-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.cpi_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.cpi_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">cpi_data(HH::HouseholdTable; output = :DataFrame)</code></pre><p>Extracts consumer price index-related parameters from the household data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(HH, :Personal_Consumption; normalize=:Use) |&gt;
        x -&gt; groupby(x, [:col, :region, :parameter]) |&gt;
        x -&gt; combine(x, :value =&gt; sum =&gt; :value)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1203-L1227">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.cps_income-Tuple{Dict}"><a class="docstring-binding" href="#WiNDCHousehold.cps_income-Tuple{Dict}"><code>WiNDCHousehold.cps_income</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">cps_income(cps_raw_data::Dict)
cps_income(cps_raw_data::Dict)</code></pre><p>Compute total CPS income by household type, state, year, and source variable.</p><p><strong>Arguments</strong></p><ul><li><code>cps_raw_data::Dict</code>: Output from <a href="#WiNDCHousehold.retrieve_cps_data-Tuple{Int64, Dict}"><code>retrieve_cps_data</code></a>.</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame with columns:<ul><li><code>hh::String</code>: Household income category.</li><li><code>state::Int</code>: State code.</li><li><code>year::Int</code>: The year of the data.</li><li><code>source::String</code>: The source variable name.</li><li><code>value::Float64</code>: The total income value in billions of dollars.</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L253-L272">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.cps_numhh-Tuple{Dict}"><a class="docstring-binding" href="#WiNDCHousehold.cps_numhh-Tuple{Dict}"><code>WiNDCHousehold.cps_numhh</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">cps_numhh(cps_raw_data::Dict)
cps_numhh(cps_raw_data::DataFrame)</code></pre><p>Compute the number of households (in millions) by household type, state, and year from CPS raw data.</p><p><strong>Arguments</strong></p><ul><li><code>cps_raw_data::Dict</code>: Output from <a href="#WiNDCHousehold.retrieve_cps_data-Tuple{Int64, Dict}"><code>retrieve_cps_data</code></a>.</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame with columns:<ul><li><code>hh::String</code>: Household income category.</li><li><code>state::Int</code>: State code.</li><li><code>year::Int</code>: The year of the data.</li><li><code>numhh::Float64</code>: The number of households in millions.</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L288-L305">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><a class="docstring-binding" href="#WiNDCHousehold.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>WiNDCHousehold.cps_vs_nipa_income_categories</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">cps_vs_nipa_income_categories(cps_income::DataFrame, nipa::DataFrame)</code></pre><p>Compare CPS income data to NIPA data by income categories.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/get_nipa.jl#L55-L60">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.create_household_transfers-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><a class="docstring-binding" href="#WiNDCHousehold.create_household_transfers-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.create_household_transfers</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">create_household_transfers(
    HH::HouseholdTable,
    raw_data::RawHouseholdData,
)</code></pre><div class="admonition is-info" id="note-bda80cf3529a74a2"><header class="admonition-header"><a class="admonition-anchor" href="#note-bda80cf3529a74a2" title="Permalink"></a></header><div class="admonition-body"><p>This must be revised!</p></div></div><p>Add transfer payments to the <code>HouseholdTable</code> <code>HH</code> based on the data in <code>raw_data</code>.</p><p><strong>Raw Data</strong></p><ul><li><a href="#WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.transfer_weights</code></a></li><li><code>raw_data.income</code> (CPS income data)</li><li><code>raw_data.medicare</code> (Medicare and Medicaid data)</li><li><code>raw_data.income_categories</code> (CPS income categories)</li></ul><p><strong>Sets Added</strong></p><ul><li><p><code>Transfer_Payment</code> </p><ul><li>Domain: <code>parameter</code></li><li>Description: &quot;Transfer Payments&quot;</li><li>Elements: <code>transfer_payment</code></li></ul></li><li><p><code>transfer_payments</code> </p><ul><li>Domain: <code>row</code></li><li>Description: &quot;Transfer Payments&quot;</li></ul></li></ul><table><tr><th style="text-align: right">Element</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>hucval</code></td><td style="text-align: right">unemployment compensation</td></tr><tr><td style="text-align: right"><code>hwcval</code></td><td style="text-align: right">workers compensation</td></tr><tr><td style="text-align: right"><code>hssval</code></td><td style="text-align: right">social security</td></tr><tr><td style="text-align: right"><code>hssival</code></td><td style="text-align: right">supplemental security</td></tr><tr><td style="text-align: right"><code>hpawval</code></td><td style="text-align: right">public assistance or welfare</td></tr><tr><td style="text-align: right"><code>hvetval</code></td><td style="text-align: right">veterans benefits</td></tr><tr><td style="text-align: right"><code>hsurval</code></td><td style="text-align: right">survivors income</td></tr><tr><td style="text-align: right"><code>hdisval</code></td><td style="text-align: right">disability</td></tr><tr><td style="text-align: right"><code>hedval</code></td><td style="text-align: right">educational assistance</td></tr><tr><td style="text-align: right"><code>hcspval</code></td><td style="text-align: right">child support</td></tr><tr><td style="text-align: right"><code>hfinval</code></td><td style="text-align: right">financial assistance</td></tr><tr><td style="text-align: right"><code>medicare</code></td><td style="text-align: right">edicare</td></tr><tr><td style="text-align: right"><code>medicaid</code></td><td style="text-align: right">edicaid</td></tr><tr><td style="text-align: right"><code>other</code></td><td style="text-align: right">Other Income</td></tr></table><div class="admonition is-info" id="note-e7fa24ac2a97cbcd"><header class="admonition-header"><a class="admonition-anchor" href="#note-e7fa24ac2a97cbcd" title="Permalink"></a></header><div class="admonition-body"><p>The year for medicare and medicaid is fixed at 2024. Need to update for more  years in the future.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L1052-L1102">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.create_personal_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><a class="docstring-binding" href="#WiNDCHousehold.create_personal_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData, JuMP.Model}"><code>WiNDCHousehold.create_personal_consumption</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">create_personal_consumption(
        HH::HouseholdTable,
        state_table::WiNDCRegional.State,
        raw_data::RawHouseholdData,
        M2::JuMP.Model
    )</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L912-L921">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.disposition_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.disposition_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.disposition_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">disposition_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts disposition-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    vcat(
        regional_local_supply(data),
        netports(data),
        total_supply(data),
        regional_national_supply(data)
        )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_local_supply</code></a></li><li><a href="#WiNDCHousehold.netports-Tuple{HouseholdTable}"><code>WiNDCHousehold.netports</code></a></li><li><a href="#WiNDCHousehold.total_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.total_supply</code></a></li><li><a href="#WiNDCHousehold.regional_national_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_national_supply</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L584-L618">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.duty_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.duty_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.duty_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>duty<em>rate(         HH::HouseholdTable;          column::Symbol = :value,          output::Symbol = :value,         parameter = :duty</em>rate     )</p><p>Calculate the duty rate for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:duty_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:dr</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:duty_rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Duty</code></li><li><code>Import</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Duty\_Rate} = \frac{\rm Duty}{\rm Import}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L516-L559">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.fetch_zip_data-Tuple{String, Function}"><a class="docstring-binding" href="#WiNDCHousehold.fetch_zip_data-Tuple{String, Function}"><code>WiNDCHousehold.fetch_zip_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">fetch_zip_data(
    url::String,
    filter_function::Function;;
    output_path::String = tempname(),
)</code></pre><p>Download a zip file from a given url and extract the files in the zip file that  are in the <code>data</code> NamedTuple.</p><p>This function will throw an error if not all files in <code>data</code> are extracted.</p><p><strong>Required Arguments</strong></p><ol><li><code>url::String</code>: The url of the zip file to download.</li><li><code>filter_function::Function;</code>: A function that takes a string and returns a boolean.  This function is used to filter the files in the zip file, it should return <code>true</code>   if the file should be extracted and <code>false</code> otherwise.</li></ol><p><strong>Optional Arguments</strong></p><ul><li><code>output_path::String</code>: The path to save the extracted files. Default is a </li></ul><p>temporary directory. If this is not an absolute path, it will be joined with the  current working directory.</p><p><strong>Output</strong></p><p>Returns a vector of the absolute paths to the extracted files.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/medicare.jl#L1-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.fica_tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">fica_tax_rate(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :fica_tax_rate,
)</code></pre><p>Calculate the FICA tax rate for each household type in each region.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:fica_tax_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:ftr</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:fica<em>tax</em>rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>FICA_Tax</code></li><li><code>Labor_Endowment</code></li></ul><p><strong>Calculation</strong></p><p>The FICA tax rate is calculated as:</p><p class="math-container">\[{\rm FICA\_Tax\_Rate} = \frac{\rm FICA\_Tax}{\sum_{\rm Destinations} \rm Labor\_Endowment}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L662-L706">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.get_capital_ownership-Tuple{WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.get_capital_ownership-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.get_capital_ownership</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_capital_ownership(
    raw_data::RawHouseholdData;
    type::Symbol = :all
)</code></pre><p>Get the capital ownership share from <code>raw_data</code>.</p><p><strong>Arguments</strong></p><ul><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS and NIPA data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>type::Symbol = :all</code>: The type of capital ownership to retrieve. Options are:<ul><li><code>:all</code>: Returns 1 (100% ownership).</li><li><code>:partial</code>: Computes the ownership share based on CPS vs NIPA data.</li></ul></li></ul><p><strong>Returns</strong></p><ul><li><code>cap_own::Float64</code>: The capital ownership share.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L307-L328">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.get_cps_data-NTuple{4, Any}"><a class="docstring-binding" href="#WiNDCHousehold.get_cps_data-NTuple{4, Any}"><code>WiNDCHousehold.get_cps_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_cps_data(
    year, 
    cps_rw, 
    variables, 
    api_key; bounds = Dict(&quot;hh1&quot; =&gt; 25000, &quot;hh2&quot; =&gt; 50000, &quot;hh3&quot; =&gt; 75000, &quot;hh4&quot; =&gt; 150000)
    )</code></pre><p>Retrieve and process CPS data for a specific year. </p><p><strong>Arguments</strong></p><ul><li><code>year::Int</code>: The year of the CPS data to load.</li><li><code>cps_rw::Vector{String}</code>: The list of CPS raw variables to load. This must contain:<ul><li><code>gestfips</code>: State FIPS code.</li><li><code>a_exprrp</code>: Expanded relationship code.</li><li><code>h_hhtype</code>: Type of household interview.</li><li><code>pppos</code>: Person identifier.</li><li><code>marsupwt</code>: ASEC supplement final weight.</li></ul></li><li><code>variables::Vector{String}</code>: The list of CPS variables to process. This must contain:<ul><li><code>htotval</code>: Total household income.</li></ul></li><li><code>api_key::String</code>: The Census API key. </li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>bounds::Dict{String, Int}</code>: A dictionary defining income bounds for household labels. Defaults to:<ul><li><code>hh1</code>: 25000</li><li><code>hh2</code>: 50000</li><li><code>hh3</code>: 75000</li><li><code>hh4</code>: 150000</li></ul></li></ul><p>These bound can be adjusted in the <code>household.yaml</code> file. See  <a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a> for more details.</p><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame containing the columns:<ul><li><code>gestfips::Int</code>: State FIPS code.</li><li><code>year::Int</code>: The year of the data.</li><li><code>hh::String</code>: Household income category.</li><li><code>marsupwt::Float64</code>: ASEC supplement final weight.</li><li><code>source::String</code>: The source variable name.</li><li><code>value::Float64</code>: The value of the source variable.</li></ul></li></ul><p><strong>Process</strong></p><ol><li>Download CPS data from the Census API using <a href="#WiNDCHousehold.get_cps_data_api-Tuple{Any, Any, Any}"><code>WiNDCHousehold.get_cps_data_api</code></a>.</li><li>Filter the data to include:<ul><li>Only households with representative persons (<code>a_exprrp</code> in [1,2]).</li><li>Only household interviews (<code>h_hhtype</code> == 1).</li><li>Only person identifier 41 (<code>pppos</code> == 41).</li></ul></li><li>Select relevant columns and stack the <code>variables</code> column into <code>source</code> and <code>value</code></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L65-L117">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.get_cps_data_api-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#WiNDCHousehold.get_cps_data_api-Tuple{Any, Any, Any}"><code>WiNDCHousehold.get_cps_data_api</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_cps_data_api(year, vars, api_key)</code></pre><p>Pull the raw data directly from the API</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L8-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.government_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.government_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.government_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">government_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts government-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    vcat(
        table(data, 
            :Government_Final_Demand,
            :Transfer_Payment,
            :Labor_Endowment;
            normalize=:Use
        ),
        WiNDCHousehold.government_deficit(data),
        WiNDCHousehold.average_labor_tax_rate(data),
    )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.government_deficit-Tuple{HouseholdTable}"><code>WiNDCHousehold.government_deficit</code></a></li><li><a href="#WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.average_labor_tax_rate</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1031-L1067">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.government_deficit-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.government_deficit-Tuple{HouseholdTable}"><code>WiNDCHousehold.government_deficit</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">government_deficit(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :government_deficit,
)</code></pre><p>Calculate the government deficit for each year.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:government_deficit</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:gd</td><td style="text-align: right">:gd</td><td style="text-align: right">:gd</td><td style="text-align: right">year</td><td style="text-align: right">:government_deficit</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Government_Final_Demand</code></li><li><code>Transfer_Payment</code></li><li><code>Average_Labor_Tax</code></li><li><code>FICA_Tax</code></li><li><code>Capital_Tax</code></li><li><code>Output_Tax</code></li><li><code>Tax</code></li><li><code>Duty</code></li></ul><p><strong>Calculation</strong></p><p>The government deficit is calculated as:</p><p class="math-container">\[{\rm Government\_Deficit} = - \sum (Government\_Final\_Demand - Transfer\_Payment - Average\_Labor\_Tax - FICA\_Tax - Capital\_Tax - Output\_Tax - Tax - Duty)\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L996-L1046">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.household_labels-Tuple{Real}"><a class="docstring-binding" href="#WiNDCHousehold.household_labels-Tuple{Real}"><code>WiNDCHousehold.household_labels</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">household_labels(amount::Real; bounds::Dict = Dict(&quot;hh1&quot; =&gt; 25000, &quot;hh2&quot; =&gt; 50000, &quot;hh3&quot; =&gt; 75000, &quot;hh4&quot; =&gt; 150000))</code></pre><p>Assign a household income category label based on the provided income amount and bounds.</p><p><strong>Arguments</strong></p><ul><li><code>amount::Real</code>: The income amount to categorize.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>bounds::Dict{String, Int}</code>: A dictionary defining income bounds for household labels. Defaults to:<ul><li><code>hh1</code>: 25000</li><li><code>hh2</code>: 50000</li><li><code>hh3</code>: 75000</li><li><code>hh4</code>: 150000</li></ul></li></ul><p>These bound can be adjusted in the <code>household.yaml</code> file. See  <a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a> for more details.</p><p><strong>Returns</strong></p><ul><li><code>String</code>: The household income category label (<code>hh1</code>, <code>hh2</code>, <code>hh3</code>, <code>hh4</code>, or <code>hh5</code>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L217-L240">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.household_model-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.household_model-Tuple{HouseholdTable}"><code>WiNDCHousehold.household_model</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">household_model(
    HH::HouseholdTable;
    etaK::Real = 4.0,
    )</code></pre><p>Constructs a WiNDCHousehold MPSGE model from a WiNDCHousehold data table.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>etaK::Real = 4.0</code>: Capital transformation elasticity</li></ul><p><strong>Returns</strong></p><ul><li><code>M::MPSGEModel</code>: An MPSGE model representing the household sector.</li></ul><p><strong>Parameters</strong></p><p>The initial values of the parameters are given by <a href="../model/model/#WiNDCHousehold.parameter_data"><code>parameter_data</code></a>. The  parameters included in the model are:</p><ul><li><code>OTR[r=states, s=sectors]</code>:  Output tax rate</li><li><code>TR[r=states, g=commodities]</code>: Tax rate</li><li><code>DR[r=states, g=commodities]</code>: Duty rate</li><li><code>TK[r=states, s=sectors]</code>:  Capital tax rate</li><li><code>FICA[r=states, h=households]</code>:  FICA tax rate</li><li><code>LTR[r=states, h=households]</code>:  Labor tax rate</li></ul><p>If the model is denoted <code>M</code>, these parameters can be accessed as <code>M[:OTR]</code>,  <code>M[:TR]</code>, etc. </p><p><strong>Variables</strong></p><p><strong>Sectors</strong></p><ul><li><code>Y[r=states, s=sectors]</code>:&quot; Production</li><li><code>X[r=states, g=commodities]</code>:&quot; Disposition</li><li><code>A[r=states, g=commodities]</code>:&quot; Absorption</li><li><code>C[r=states, h=households]</code>:&quot; Household Consumption</li><li><code>MS[r=states, m=margins]</code>:&quot; Margin supply</li><li><code>LS[r=states, h=households]</code>:&quot; Labor supply</li><li><code>KS</code>: Aggregate Capital stock</li></ul><p><strong>Commodities</strong></p><ul><li><code>PA[r=states, g=commodities]</code>:&quot; Regional market (input)</li><li><code>PC[r=states, h=households]</code>:&quot; Consumer price index</li><li><code>PD[r=states, g=commodities]</code>:&quot; Local market price</li><li><code>PFX</code>: Foreign exchange</li><li><code>PK</code>: Aggregate return to capital</li><li><code>PL[r=states]</code>:&quot; Wage rate</li><li><code>PLS[r=states, h=households]</code>:&quot; Leisure price</li><li><code>PM[r=states, m=margins]</code>:&quot; Margin price</li><li><code>PN[g=commodities]</code>:&quot; National market</li><li><code>PY[r=states, g=commodities]</code>:&quot; Regional market (output)</li><li><code>RK[r=states, s=sectors]</code>:&quot; Sectoral rental rate</li><li><code>RKS</code>: Capital stock</li></ul><p><strong>Consumers</strong></p><ul><li><code>RA[r=states, h=households]</code>: Representative agent</li><li><code>NYSE</code>: Aggregate capital owner</li><li><code>INVEST</code>: Aggregate investor</li><li><code>GOVT</code>: Aggregate government</li></ul><p><strong>Auxiliaries</strong></p><p>All auxiliaries start with a value of 1. </p><ul><li><code>SAVERATE</code>: Domestic saving rate</li><li><code>TRANS</code>: Budget balance rationing variable</li><li><code>SSK</code>: Steady-state capital stock</li><li><code>CPI</code>: Consumer price index</li></ul><p><strong>Production Blocks</strong></p><p><strong>Y - Sectoral Production in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.sectoral_output"><code>WiNDCHousehold.sectoral_output</code></a></p><pre><code class="language-julia hljs">sectoral_output(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, Y[r=states, s=sectors], [t=0, s=0, va=&gt;s=1], begin
    @output(PY[r,g=commodities], Q[g, s, r, :intermediate_supply],                     t,  taxes = [Tax(GOVT, M[:OTR][r,s])], reference_price = 1-Q[:otr, s, r, :output_tax_rate])
    @input(PA[r, g=commodities], Q[g, s, r, :intermediate_demand],                     s)
    @input(PL[r],            sum(Q[l, s, r, :labor_demand] for l in labor_demand),     va)
    @input(RK[r, s],         sum(Q[k, s, r, :capital_demand] for k in capital_demand), va, taxes = [Tax(GOVT, M[:TK][r,s])], reference_price = 1 + Q[:ktr, s, r, :capital_tax_rate])
end)</code></pre><p><strong>X - Commodity Disposition in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.disposition_data"><code>WiNDCHousehold.disposition_data</code></a></p><pre><code class="language-julia hljs">disposition_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, X[r=states, g=commodities], [s=0, t=4], begin
    @output(PFX,      Q[g, r, :netport],                t)
    @output(PN[g],    Q[g, r, :region_national_supply], t)
    @output(PD[r, g], Q[g, r, :region_local_supply],    t)
    @input(PY[r, g],  Q[g, r, :total_supply],           s)
end)</code></pre><p><strong>A - Armington Commodity Absorption in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.armington_data"><code>WiNDCHousehold.armington_data</code></a></p><pre><code class="language-julia hljs">armington_data(HH; output = :DefaultDict) |&gt; Q-&gt; 
@production(M, A[r=states, g=commodities], [t=0, s=0, dm =&gt; s = 2, d=&gt;dm=4], begin
    @output(PA[r, g],        Q[g, :abs, r, :absorption],                  t, taxes = [Tax(GOVT, M[:TR][r,g])], reference_price = 1 - Q[g, :tr, r, :tax_rate])
    @output(PFX,             Q[g, :reexport, r, :reexport],               t)
    @input(PN[g],            Q[g, :national_demand, r, :national_demand], d)
    @input(PD[r, g],         Q[g, :local_demand, r, :local_demand],       d)
    @input(PFX,          sum(Q[g, i, r, :import] for i in imports),       dm, taxes = [Tax(GOVT, M[:DR][r,g])], reference_price = 1 + Q[g, :dr, r, :duty_rate])
    @input(PM[r, m=margins], Q[g, m, r, :margin_demand],                  s)
end)</code></pre><p><strong>MS - Margin Supply and Demand in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.margin_supply_data"><code>WiNDCHousehold.margin_supply_data</code></a></p><pre><code class="language-julia hljs">margin_supply_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, MS[r=states, m=margins], [t=0, s=0], begin
    @output(PM[r, m],        sum(Q[g, m, r, :margin_demand] for g in commodities), t)
    @input(PN[g=commodities],    Q[g, m, r, :national_margin_supply],              s)
    @input(PD[r, g=commodities], Q[g, m, r, :local_margin_supply],                 s)
end)</code></pre><p><strong>C - Household Consumption in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.consumption_data"><code>WiNDCHousehold.consumption_data</code></a></p><pre><code class="language-julia hljs">consumption_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, C[r=states, h=households], [t=0, s=1], begin
    @output(PC[r, h],        sum(Q[g, h, r, :personal_consumption] for g in commodities), t)
    @input(PA[r, g=commodities], Q[g, h, r, :personal_consumption],                       s)
end)</code></pre><p><strong>LS - Labor Supply in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.labor_data"><code>WiNDCHousehold.labor_data</code></a></p><pre><code class="language-julia hljs">labor_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, LS[r=states, h=households], [t=0, s=1], begin
    @output(PL[q=states], Q[q, h, r, :labor_endowment], t, taxes = [Tax(GOVT, M[:LTR][r,h] + M[:FICA][r,h])], reference_price = 1 - Q[:ltr, h, r, :marginal_labor_tax_rate] - Q[:ftr, h, r, :fica_tax_rate])
    @input(PLS[r, h],     Q[:ls, h, r, :labor_supply], s)
end)</code></pre><p><strong>KS - Capital Stock Transformation</strong></p><p><a href="../model/model/#WiNDCHousehold.capital_stock_data"><code>WiNDCHousehold.capital_stock_data</code></a></p><pre><code class="language-julia hljs">capital_stock_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@production(M, KS, [t=etaK, s=1], begin
    @output(RK[r=states, s=sectors], Q[s, r, :capital_demand], t)
    @input(RKS,                  sum(Q[ss, rr, :capital_demand] for ss in sectors, rr in states), s)
end)</code></pre><p><strong>Demands</strong></p><p><strong>RA - Representative Agent Demand in Each State</strong></p><p><a href="../model/model/#WiNDCHousehold.representative_agent_data"><code>WiNDCHousehold.representative_agent_data</code></a></p><pre><code class="language-julia hljs">representative_agent_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@demand(M, RA[r=states, h=households], begin
    @final_demand(PC[r, h], sum(Q[g, h, r, :personal_consumption] for g in commodities; init=0))
    @final_demand(PLS[r, h],    Q[:ld, h, r, :leisure_demand])
    @endowment(PLS[r, h],       Q[:ld, h, r, :leisure_demand] + Q[:ls, h, r, :labor_supply])
    @endowment(PFX,         sum(Q[trn, h, r, :transfer_payment] for trn in transfers; init=0))
    @endowment(PLS[r, h],   (M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))
    @endowment(PK,              Q[:interest, h, r, :household_interest])
    @endowment(PFX,            -Q[:savings, h, r, :savings]*SAVERATE)
end, elasticity = Q[:els, h, r, :leisure_consumption_elasticity])</code></pre><p><strong>NYSE - Aggregate Capital Owner Demand</strong></p><p><a href="../model/model/#WiNDCHousehold.NYSE_data"><code>WiNDCHousehold.NYSE_data</code></a></p><pre><code class="language-julia hljs">NYSE_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@demand(M, NYSE, begin
    @final_demand(PK,                       sum(Q[row, col, r, :household_supply] for row in commodities, col in personal_consumption, r in states; init=0) + sum(Q[row, col, r, :capital_demand] for row in capital_demand, col in sectors, r in states; init=0))
    @endowment(PY[r=states, g=commodities], sum(Q[g, col, r, :household_supply] for col in personal_consumption; init=0))
    @endowment(RKS,                         sum(Q[k, s, r, :capital_demand] for k in capital_demand, s in sectors, r in states;init=0)*SSK)
end)</code></pre><p><strong>INVEST - Aggregate Investor Demand</strong></p><p><a href="../model/model/#WiNDCHousehold.invest_data"><code>WiNDCHousehold.invest_data</code></a></p><pre><code class="language-julia hljs">invest_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@demand(M, INVEST, begin
    @final_demand(PA[r=states, g=commodities], Q[g, :invest, r, :investment_final_demand])
    @endowment(PFX,                        sum(Q[:savings, h, r, :savings] for h in households, r in states; init=0)*SAVERATE)
    @endowment(PFX, 0) # fsav0
end)</code></pre><p><strong>GOVT - Aggregate Government Demand</strong></p><p><a href="../model/model/#WiNDCHousehold.government_data"><code>WiNDCHousehold.government_data</code></a></p><pre><code class="language-julia hljs">government_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@demand(M, GOVT, begin
    @final_demand(PA[r=states, g=commodities], Q[g, :govern, r, :government_final_demand])
    @endowment(PFX,                 -TRANS*sum(Q[trn, h, r, :transfer_payment] for trn in transfers, h in households, r in states; init=0))
    @endowment(PFX,                            Q[:gd, :gd, :gd, :government_deficit])
    @endowment(PLS[r=states, h=households], -(M[:LTR][r,h] - Q[:altr, h, r, :average_labor_tax_rate]) * sum(Q[dest, h, r, :labor_endowment] for dest in states; init=0))
end)</code></pre><p><strong>Auxiliary Constraints</strong></p><p><strong>SSK - Steady-State Capital Stock Constraint</strong></p><p><a href="../model/model/#WiNDCHousehold.ssk_data"><code>WiNDCHousehold.ssk_data</code></a></p><pre><code class="language-julia hljs">ssk_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@aux_constraint(M, SSK, 
    sum(Q[g, :invest, r, :investment_final_demand]*(PA[r,g]-RKS) for g in commodities, r in states)
)</code></pre><p><strong>SAVERATE - Domestic Saving Rate Constraint</strong></p><p><a href="../model/model/#WiNDCHousehold.saverate_data"><code>WiNDCHousehold.saverate_data</code></a></p><pre><code class="language-julia hljs">saverate_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@aux_constraint(M, SAVERATE, 
    INVEST - sum(Q[g, :invest, r, :investment_final_demand]*PA[r,g]*SSK for g in commodities, r in states)
)</code></pre><p><strong>TRANS - Budget Balance Rationing Variable Constraint</strong></p><p><a href="../model/model/#WiNDCHousehold.trans_data"><code>WiNDCHousehold.trans_data</code></a></p><pre><code class="language-julia hljs">trans_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@aux_constraint(M, TRANS,
    GOVT - sum(PA[r,g]*Q[g, :govern, r, :government_final_demand] for g in commodities, r in states)
)</code></pre><p><strong>CPI - Consumer Price Index Constraint</strong></p><p><a href="../model/model/#WiNDCHousehold.cpi_data"><code>WiNDCHousehold.cpi_data</code></a></p><pre><code class="language-julia hljs">cpi_data(HH; output = :DefaultDict) |&gt; Q-&gt;
@aux_constraint(M, CPI,
    CPI - sum(PC[r,h]*Q[h, r, :personal_consumption] for h in households, r in states)/ sum(Q[h, r, :personal_consumption] for h in households, r in states; init=0)
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1-L265">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.household_raw_data-Tuple{Dict}"><a class="docstring-binding" href="#WiNDCHousehold.household_raw_data-Tuple{Dict}"><code>WiNDCHousehold.household_raw_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">household_raw_data()
household_raw_data(path::String)
household_raw_data(info::Dict)</code></pre><p>Load the raw household data based on the provided configuration dictionary.</p><p><strong>Arguments</strong></p><p>If no arguments are provided, the function loads the configuration from <code>household.yaml</code>  in the current directory. If a <code>path::String</code> is provided, it loads the configuration from the specified path. If a <code>info::Dict</code> is provided, it uses the given configuration dictionary directly.</p><p><strong>Returns</strong></p><p>This currently returns a tuple containing:</p><ul><li>A <code>State</code> table object</li><li>A <a href="#WiNDCHousehold.RawHouseholdData"><code>WiNDCHousehold.RawHouseholdData</code></a> object containing all the raw household data.</li></ul><p><strong>Raw Data Loaded</strong></p><ul><li><a href="#WiNDCHousehold.load_cps_data-Tuple{Dict}"><code>WiNDCHousehold.load_cps_data</code></a></li><li><a href="#WiNDCHousehold.load_nipa_data_api-Tuple{Vector{Int64}, Any}"><code>WiNDCHousehold.load_nipa_data_api</code></a></li><li><a href="#WiNDCHousehold.load_acs_data_api-Tuple{Dict}"><code>WiNDCHousehold.load_acs_data_api</code></a></li><li><a href="#WiNDCHousehold.load_medicare_data_api-Tuple{String}"><code>WiNDCHousehold.load_medicare_data_api</code></a></li><li><a href="#WiNDCHousehold.load_labor_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_labor_tax_rates</code></a></li><li><a href="#WiNDCHousehold.load_capital_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_capital_tax_rates</code></a></li><li><a href="#WiNDCHousehold.load_cex_income_elasticities-Tuple{String}"><code>WiNDCHousehold.load_cex_income_elasticities</code></a></li><li><a href="#WiNDCHousehold.load_pce_shares-Tuple{String}"><code>WiNDCHousehold.load_pce_shares</code></a></li></ul><p><strong>Maps Loaded</strong></p><ul><li><a href="#WiNDCHousehold.load_state_fips-Tuple{}"><code>WiNDCHousehold.load_state_fips</code></a></li><li><a href="#WiNDCHousehold.load_cps_income_categories-Tuple{}"><code>WiNDCHousehold.load_cps_income_categories</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/load_raw_data.jl#L30-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.initial_transfer_payments-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.initial_transfer_payments-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.initial_transfer_payments</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">initial_transfer_payments(
    HH::HouseholdTable,
    state_table::State,
    raw_data::RawHouseholdData,
)</code></pre><p>Generate initial transfer payments for households by applying transfer weights to CPS income and adding Medicare and Medicaid data.</p><p>Returns a DataFrame with the following columns:</p><ul><li><code>row</code>: The transfer payment categories (listed below).</li><li><code>col</code>: The household identifier.</li><li><code>region</code>: The state identifier.</li><li><code>year</code>: The year of the data.</li><li><code>parameter</code>: The parameter name, set to <code>:transfer_payment</code>.</li><li><code>value</code>: The computed transfer payment value for the household.</li></ul><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household information.</li><li><code>state_table::State</code>: The state table containing state information.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS income, Medicare, Medicaid, and income categories.</li></ul><p>The first two arguments are included for consistency with other initial data functions, but are not directly used in this function.</p><p><strong>Raw Input Data</strong></p><ul><li><a href="#WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.transfer_weights</code></a></li><li><code>raw_data.income</code> (CPS income data)</li><li><code>raw_data.medicare</code> (Medicare and Medicaid data)</li><li><code>raw_data.income_categories</code> (CPS income categories)</li></ul><p><strong>Transfer Payment Categories</strong></p><table><tr><th style="text-align: right">Element</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>hucval</code></td><td style="text-align: right">unemployment compensation</td></tr><tr><td style="text-align: right"><code>hwcval</code></td><td style="text-align: right">workers compensation</td></tr><tr><td style="text-align: right"><code>hssval</code></td><td style="text-align: right">social security</td></tr><tr><td style="text-align: right"><code>hssival</code></td><td style="text-align: right">supplemental security</td></tr><tr><td style="text-align: right"><code>hpawval</code></td><td style="text-align: right">public assistance or welfare</td></tr><tr><td style="text-align: right"><code>hvetval</code></td><td style="text-align: right">veterans benefits</td></tr><tr><td style="text-align: right"><code>hsurval</code></td><td style="text-align: right">survivors income</td></tr><tr><td style="text-align: right"><code>hdisval</code></td><td style="text-align: right">disability</td></tr><tr><td style="text-align: right"><code>hedval</code></td><td style="text-align: right">educational assistance</td></tr><tr><td style="text-align: right"><code>hcspval</code></td><td style="text-align: right">child support</td></tr><tr><td style="text-align: right"><code>hfinval</code></td><td style="text-align: right">financial assistance</td></tr><tr><td style="text-align: right"><code>medicare</code></td><td style="text-align: right">edicare</td></tr><tr><td style="text-align: right"><code>medicaid</code></td><td style="text-align: right">edicaid</td></tr></table><p><strong>Process</strong></p><ol><li>Subset the CPS income data to include only transfer payment categories.</li><li>Join with transfer weights and multiply CPS income by the corresponding weight.</li><li>Add Medicare and Medicaid data for the year 2024.</li></ol><div class="admonition is-info" id="Data-fixed-at-2024-4642dd88e0572be5"><header class="admonition-header">Data fixed at 2024<a class="admonition-anchor" href="#Data-fixed-at-2024-4642dd88e0572be5" title="Permalink"></a></header><div class="admonition-body"><p>The year for medicare and medicaid is fixed at 2024. Need to update for more  years in the future.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/pre_calibration_data.jl#L106-L171">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.initialize_table-Tuple{WiNDCRegional.State}"><a class="docstring-binding" href="#WiNDCHousehold.initialize_table-Tuple{WiNDCRegional.State}"><code>WiNDCHousehold.initialize_table</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">initialize_table(state_table::State)</code></pre><p>Create an initial <code>HouseholdTable</code> from a <code>State</code> table by selecting only the  relevant parameters, sets, and elements.</p><p>Essentially, all parameters, sets, and elements are maintained except those related to <code>personal_consumption</code>.</p><p><strong>Parameters Maintained</strong></p><ul><li><code>Capital_Demand</code></li><li><code>Duty</code></li><li><code>Export</code></li><li><code>Government_Final_Demand</code></li><li><code>Household_Supply</code></li><li><code>Import</code></li><li><code>Intermediate_Demand</code></li><li><code>Intermediate_Supply</code></li><li><code>Investment_Final_Demand</code></li><li><code>Labor_Demand</code></li><li><code>Local_Demand</code></li><li><code>Local_Margin_Supply</code></li><li><code>Margin_Demand</code></li><li><code>National_Demand</code></li><li><code>National_Margin_Supply</code></li><li><code>Output_Tax</code></li><li><code>Reexport</code></li><li><code>Tax</code></li></ul><p><strong>Sets Maintained</strong></p><ul><li><code>duty</code>   </li><li><code>export</code></li><li><code>government_final_demand</code></li><li><code>import</code></li><li><code>investment_final_demand</code></li><li><code>local_demand</code></li><li><code>margin</code></li><li><code>national_demand</code></li><li><code>reexport</code></li><li><code>sector</code></li><li><code>tax</code></li><li><code>trade</code></li><li><code>transport</code></li><li><code>state</code></li><li><code>capital_demand</code></li><li><code>commodity</code></li><li><code>labor_demand</code></li><li><code>output_tax</code></li><li><code>year</code></li><li><code>Final_Demand</code></li><li><code>Other_Final_Demand</code></li><li><code>Margin_Supply</code></li><li><code>Use</code></li><li><code>Supply</code></li><li><code>Value_Added</code></li></ul><p><strong>Sets Added</strong></p><ul><li><code>household</code> <ul><li>Domain: <code>col</code></li><li>Description: &quot;Household Categories&quot;</li><li>Elements: <code>hh1</code>, <code>hh2</code>, <code>hh3</code>, <code>hh4</code>, <code>hh5</code></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L2-L67">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.invest_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.invest_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.invest_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">invest_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts investment-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(data, 
        :Investment_Final_Demand,
        :Savings;
        normalize=:Use
    )</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L986-L1012">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.labor_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.labor_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.labor_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">labor_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts leisure-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">   vcat(
        table(data, :Labor_Endowment),
        WiNDCHousehold.labor_supply(data),
        WiNDCHousehold.marginal_labor_tax_rate(data),
        WiNDCHousehold.fica_tax_rate(data)
    )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a></li><li><a href="#WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.marginal_labor_tax_rate</code></a></li><li><a href="#WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.fica_tax_rate</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L773-L806">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.labor_endowment_multiplier-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.labor_endowment_multiplier-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.labor_endowment_multiplier</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">labor_endowment_multiplier(
    HH::HouseholdTable,
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the labor endowment multiplier for each region based on labor demand and wages.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>labor_endow_multiplier::DataFrame</code>: A DataFrame with columns <code>:region</code> and <code>:le_mult</code> representing the labor endowment multiplier for each region.</li></ul><p><strong>Computation</strong></p><p>The labor endowment multiplier is computed using the formula:</p><p class="math-container">\[    {\rm Labor\ Endowment\ Multiplier} = \frac{\rm Fringe\ Benefit\ Markup \cdot \rm Wage}{\rm Labor\ Demand}\]</p><p>Changes also made based on commuting patterns to ensure that regions without commuting workers do not have their labor endowment multipliers adjusted beyond 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L599-L630">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">labor_supply(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :labor_supply,
)</code></pre><p>Calculate the labor supply for households. The labor supply is defined as the labor endowment adjusted for marginal labor taxes and FICA taxes.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:labor_supply</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:ls</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:labor_supply</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Labor Endowment</code></li><li><code>Marginal Labor Tax</code></li><li><code>FICA Tax</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Labor\_Supply} = \sum (Labor\_Endowment - Marginal\_Labor\_Tax - FICA\_Tax)\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L1-L45">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.leisure_consumption_elasticity-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.leisure_consumption_elasticity-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_consumption_elasticity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">leisure_consumption_elasticity(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :leisure_consumption_elasticity,
)</code></pre><p>Calculate the leisure consumption elasticity for households.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:leisure_consumption_elasticity</code>).   </li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:els</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:leisure<em>consumption</em>elasticity</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Personal_Consumption</code></li></ul><p><strong>Aggregate Parameters</strong></p><ul><li><a href="#WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_demand</code></a></li><li><a href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a></li></ul><p><strong>Calculation</strong></p><p>Leisure consumption elasticity is calculated as:</p><p class="math-container">\[{\rm Leisure\_Consumption\_Elasticity} = \epsilon \cdot \frac{(PCE + LD)}{PCE} \cdot \frac{LS}{LD}\]</p><p>where </p><ul><li>( \epsilon ) is the leisure income elasticity (0.2),</li><li><code>PCE</code> is Personal Consumption Expenditure</li><li><code>LD</code> is Leisure Demand</li><li><code>LS</code> is Labor Supply</li></ul><p>```</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L1077-L1133">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_demand</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">leisure_demand(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :leisure_demand,
)</code></pre><p>Calculate the leisure demand for households. The leisure demand is defined as a fraction of the leisure supply, based on a labor supply income elasticity, which is set to 0.05.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:leisure_demand</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:ld</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:leisure_demand</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Aggregate Parameters</strong></p><ul><li><a href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a></li></ul><p><strong>Calculation</strong></p><p>Leisure demand is calculated as:</p><p class="math-container">\[{\rm Leisure\_Demand} = \epsilon \cdot {\rm Leisure\_Supply}\]</p><p>where ( \epsilon ) is the labor supply income elasticity (0.05).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L799-L843">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_acs_data_api-Tuple{Dict}"><a class="docstring-binding" href="#WiNDCHousehold.load_acs_data_api-Tuple{Dict}"><code>WiNDCHousehold.load_acs_data_api</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_acs_data_api(year::Int, census_api_key; output_path::String = tempname())</code></pre><p>Pull the raw ACS commuting flow data directly from the Census website for a given year.</p><p><strong>Arguments</strong></p><ul><li><code>year::Int</code>: The year of the ACS data to load.</li><li><code>census_api_key::String</code>: The Census API key.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>output_path::String</code>: The path to save the downloaded ACS data. Default is a temporary directory.</li></ul><p><strong>Returns</strong></p><p>Return a DataFrame with the commuting flow data for the specified year, enriched  with income data from the CPS.</p><p><strong>Data Source</strong></p><p>The ACS commuting flow data is downloaded from the Census website:</p><pre><code class="language-julia hljs">https://www2.census.gov/programs-surveys/demo/tables/metro-micro/{year}/commuting-flows-{year}/table1.xlsx</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/get_acs.jl#L1-L27">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_acs_medicare_data-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_acs_medicare_data-Tuple{String}"><code>WiNDCHousehold.load_acs_medicare_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_acs_medicare_data(
    census_api_key::String;
    years::Vector{Int} = 2009:2024,
    state_fips::DataFrame = load_state_fips()
)</code></pre><p>Load ACS Medicare data from the Census API for the specified years.</p><p><strong>Required Arguments</strong></p><ul><li><code>census_api_key::String</code>: The Census API key.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>years::Vector{Int}</code>: The years of the ACS data to load. Default is 2009 to 2024.</li><li><code>state_fips::DataFrame</code>: A DataFrame containing state FIPS codes. Default is   the result of <code>load_state_fips()</code>.</li></ul><div class="admonition is-info" id="Excluded-2020-c96eaf755cd0d34d"><header class="admonition-header">Excluded 2020<a class="admonition-anchor" href="#Excluded-2020-c96eaf755cd0d34d" title="Permalink"></a></header><div class="admonition-body"><p>The year 2020 is excluded from the default years because the ACS data for that year does not include Medicare data due to low response rates. </p></div></div><div class="admonition is-info" id="Early-years?-61e7c3d99380f85c"><header class="admonition-header">Early years?<a class="admonition-anchor" href="#Early-years?-61e7c3d99380f85c" title="Permalink"></a></header><div class="admonition-body"><p>Currently we don&#39;t have data before 2009, so requesting years before. We should update this to just use 2009 data for earlier years.</p></div></div><p><strong>Return</strong></p><p>Returns a DataFrame with shares of income groups for Medicare enrollment by state  and year.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/medicare.jl#L170-L201">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_capital_tax_rates-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_capital_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_capital_tax_rates</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_capital_tax_rates(
    path::String;
    state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation])
)</code></pre><p>Load capital tax rates from a CSV file located at <code>path</code>. The CSV is expected to contain state-level capital tax rate information, which will be matched with state abbreviations provided by <code>state_abbreviations</code>.</p><p><strong>Arguments</strong></p><ul><li><code>path::String</code>: The path to the CSV file.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>state_abbreviations::DataFrame</code>: A DataFrame containing state abbreviations    and their corresponding state names. Default loads state FIPS with state    names and abbreviations.</li></ul><p><strong>Returns</strong></p><p>A DataFrame containing capital tax rates by state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/tax_rates.jl#L41-L64">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_cex_income_elasticities-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_cex_income_elasticities-Tuple{String}"><code>WiNDCHousehold.load_cex_income_elasticities</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_cex_income_elasticities(path::String)</code></pre><p>Load CEX income elasticities from a CSV file located at <code>path</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cex_files.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_cps_data-Tuple{Dict}"><a class="docstring-binding" href="#WiNDCHousehold.load_cps_data-Tuple{Dict}"><code>WiNDCHousehold.load_cps_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_cps_data(cps_info::Dict; state_fips = WiNDCHousehold.load_state_fips())</code></pre><p>Load CPS data based on the provided configuration. This will either retrieve data from the Census API or load it from a local CSV file.</p><p><strong>Arguments</strong></p><ul><li><code>info::Dict</code>: The household configuration dictionary, obtained from </li></ul><p><a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a>.</p><p><strong>Optional Arguments</strong></p><ul><li><code>state_fips::DataFrame</code>: A DataFrame containing state FIPS codes. Defaults to loading <a href="#WiNDCHousehold.load_state_fips-Tuple{}"><code>WiNDCHousehold.load_state_fips</code></a>.</li></ul><p><strong>Returns</strong></p><p>A NamedTuple with the following DataFrames:</p><ul><li><code>income::DataFrame</code>: Output from </li><li><code>numhh::DataFrame</code>: A DataFrame containing the number of households by household type</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L24-L45">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_cps_income_categories-Tuple{}"><a class="docstring-binding" href="#WiNDCHousehold.load_cps_income_categories-Tuple{}"><code>WiNDCHousehold.load_cps_income_categories</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_cps_income_categories(;
        path = joinpath(@__DIR__, &quot;maps&quot;, &quot;cps_income_categories.csv&quot;),
        cols_to_keep = [:windc, :source]
    )</code></pre><p>Load a CSV file containing CPS income category mappings. The default path is set to <code>maps/cps_income_categories.csv</code> relative to this file&#39;s directory. You can specify which columns to keep using the <code>cols_to_keep</code> argument.</p><p>Returns a DataFrame with the specified columns as Strings.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/maps.jl#L35-L46">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_household_yaml-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_household_yaml(path::String)
load_household_yaml()</code></pre><p>Load the household YAML configuration file from the specified path.</p><p>!!!note &quot;&quot;     This is a placeholder documentation string. More details to be added later.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/load_raw_data.jl#L1-L9">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_labor_tax_rates-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_labor_tax_rates-Tuple{String}"><code>WiNDCHousehold.load_labor_tax_rates</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_labor_tax_rates(
        path::String;
        state_abbreviations = WiNDCHousehold.load_state_fips(cols_to_keep = [:state, :abbreviation])
    )</code></pre><p>Load labor tax rates from a CSV file located at <code>path</code>. The CSV is expected to  contain state-level labor tax rate information, which will be matched with state  abbreviations provided by <code>state_abbreviations</code>.</p><p><strong>Arguments</strong></p><ul><li><code>path::String</code>: The path to the CSV file.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>state_abbreviations::DataFrame</code>: A DataFrame containing state abbreviations    and their corresponding state names. Default loads state FIPS with state    names and abbreviations.</li></ul><p><strong>Returns</strong></p><p>A DataFrame containing labor tax rates by household and state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/tax_rates.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_medicare_data-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_medicare_data-Tuple{String}"><code>WiNDCHousehold.load_medicare_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_medicare_data(path::String; years::UnitRange{Int}=2009:2024)</code></pre><p>Load Medicare or Medicaid data from a CSV file at the given path.</p><p><strong>Required Arguments</strong></p><ul><li><code>path::String</code>: The path to the CSV file.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>years::UnitRange{Int}</code>: The range of years to include in the data. Default is 2009 to 2024.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/medicare.jl#L274-L286">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_medicare_data_api-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_medicare_data_api-Tuple{String}"><code>WiNDCHousehold.load_medicare_data_api</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_medicare_data_api(
    census_api_key::String;
    url::String = &quot;https://www.cms.gov/research-statistics-data-and-systems/statistics-trends-and-reports/nationalhealthexpenddata/downloads/resident-state-estimates.zip&quot;,
    output_path::String = tempname(),
    years::UnitRange{Int} = 2009:2024,
    state_fips::DataFrame = load_state_fips()
)</code></pre><p>Load Medicare and Medicaid data from the CMS website for the specified years.</p><p><strong>Required Arguments</strong></p><ul><li><code>census_api_key::String</code>: The Census API key.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>url::String</code>: The url of the Medicare/Medicaid data zip file. Default is the CMS website link.</li><li><code>output_path::String</code>: The path to save the downloaded and extracted data. Default is   a temporary directory.</li><li><code>years::UnitRange{Int}</code>: The range of years to include in the data   Default is 2009 to 2024.</li><li><code>state_fips::DataFrame</code>: A DataFrame containing state FIPS codes. Default   is the result of <code>load_state_fips()</code>.</li></ul><p><strong>Returns</strong></p><p>A DataFrame containing Medicare and Medicaid data by state and year.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/medicare.jl#L78-L107">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_nipa_data_api-Tuple{Vector{Int64}, Any}"><a class="docstring-binding" href="#WiNDCHousehold.load_nipa_data_api-Tuple{Vector{Int64}, Any}"><code>WiNDCHousehold.load_nipa_data_api</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_nipa_data_api(years::Vector{Int}, bea_api_key)</code></pre><p>Pull the raw data directly from the BEA API</p><p><strong>Arguments</strong></p><ul><li><code>years::Vector{Int}</code>: The years of the NIPA data to load.</li><li><code>bea_api_key::String</code>: The BEA API key.</li></ul><p><strong>Returns</strong></p><p>A DataFrame with the NIPA data for the specified years.</p><p><strong>Query</strong></p><table><tr><th style="text-align: right">Variable</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: right">Method</td><td style="text-align: right">GetData</td></tr><tr><td style="text-align: right">datasetname</td><td style="text-align: right">NIPA</td></tr><tr><td style="text-align: right">TableName</td><td style="text-align: right">T20100</td></tr><tr><td style="text-align: right">Frequency</td><td style="text-align: right">A</td></tr><tr><td style="text-align: right">Year</td><td style="text-align: right">Comma-separated list of years</td></tr><tr><td style="text-align: right">ResultFormat</td><td style="text-align: right">json</td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/get_nipa.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_pce_shares-Tuple{String}"><a class="docstring-binding" href="#WiNDCHousehold.load_pce_shares-Tuple{String}"><code>WiNDCHousehold.load_pce_shares</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">function load_pce_shares(
    path::String;
    naics_windc_map = load_windc_naics_map()
)</code></pre><p>Load PCE shares from a CSV file located at <code>path</code>. The CSV is expected to contain columns for CEX categories, WiNDC categories, and percentage of PCE shares. The function joins this data with a NAICS to WiNDC mapping to associate CEX categories with NAICS codes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cex_files.jl#L11-L21">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_state_fips-Tuple{}"><a class="docstring-binding" href="#WiNDCHousehold.load_state_fips-Tuple{}"><code>WiNDCHousehold.load_state_fips</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_state_fips(;
        path = joinpath(@__DIR__, &quot;maps&quot;, &quot;state_fips.csv&quot;),
        cols_to_keep = [:fips, :state]
    )</code></pre><p>Load a CSV file containing state FIPS codes and state names. The default path is set to <code>maps/state_fips.csv</code> relative to this file&#39;s directory. You can specify which columns to keep using the <code>cols_to_keep</code> argument.</p><p>Returns a DataFrame with the specified columns as Strings.</p><p><strong>Optional Arguments</strong></p><ul><li><code>path::String</code>: Path to the state FIPS CSV file.</li><li><code>cols_to_keep::Vector{Symbol}</code>: Columns to keep from the CSV file. Default is <code>[:fips, :state]</code>.</li></ul><p>It is recommended to keep the columns <code>:fips</code> and <code>:state</code> for proper mapping.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/maps.jl#L1-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.load_windc_naics_map-Tuple{}"><a class="docstring-binding" href="#WiNDCHousehold.load_windc_naics_map-Tuple{}"><code>WiNDCHousehold.load_windc_naics_map</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">load_windc_naics_map(;
        path = joinpath(@__DIR__, &quot;maps&quot;, &quot;naics_windc_map.csv&quot;)
    )</code></pre><p>Load a CSV file containing the mapping between WiNDC labels and NAICS codes. The default path is set to <code>maps/naics_windc_map.csv</code> relative to this file&#39;s directory.</p><p>Returns a DataFrame with columns <code>:naics</code> and <code>:windc</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/maps.jl#L61-L70">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.margin_supply_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.margin_supply_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.margin_supply_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">margin_supply_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts margin supply and demand parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(data, :Margin_Demand, :Margin_Supply; normalize = :Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L695-L717">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.marginal_labor_tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">marginal_labor_tax_rate(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :marginal_labor_tax_rate
)</code></pre><p>Calculate the marginal labor tax rate for each household type in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:marginal_labor_tax_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:ltr</td><td style="text-align: right">household</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:marginal<em>labor</em>tax_rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Marginal_Labor_Tax</code></li><li><code>Labor_Endowment</code></li></ul><p><strong>Calculation</strong></p><p>The marginal labor tax rate is calculated as:</p><p class="math-container">\[{\rm Marginal\_Labor\_Tax\_Rate} = \frac{\rm Marginal\_Labor\_Tax}{\sum_{\rm Destinations} \rm Labor\_Endowment}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L587-L631">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.netports-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.netports-Tuple{HouseholdTable}"><code>WiNDCHousehold.netports</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">netports(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :netport
)</code></pre><p>Calculate the netports for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:netport</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:netport</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:netport</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable </p><ul><li><code>Export</code></li><li><code>Reexport</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Netports} = \sum (Export + Reexport)\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L249-L291">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.nipa_fringe_benefit_markup-Tuple{DataFrames.DataFrame}"><a class="docstring-binding" href="#WiNDCHousehold.nipa_fringe_benefit_markup-Tuple{DataFrames.DataFrame}"><code>WiNDCHousehold.nipa_fringe_benefit_markup</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">nipa_fringe_benefit_markup(nipa::DataFrame)</code></pre><p>Calculate the fringe benefit markup from NIPA data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/get_nipa.jl#L136-L140">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.other_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.other_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.other_income</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">other_income(
    HH::HouseholdTable,
    state_table::WiNDCRegional.State,
    raw_data::RawHouseholdData
)</code></pre><p>Compute the other income for each household in <code>HH</code> based on adjusted consumption, adjusted wages, transfer payments, and adjusted capital income.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table.</li><li><code>state_table::WiNDCRegional.State</code>: The state-level WiNDC table.</li><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS data.</li></ul><p><strong>Returns</strong></p><ul><li><code>other_income::DataFrame</code>: A DataFrame with columns <code>:hh</code>, <code>:year</code>, <code>:state</code>, and <code>:income</code> representing the other income for each household.</li></ul><p><strong>Computation</strong></p><p>The other income is computed using the formula:</p><p class="math-container">\[    {\rm Other\ Income} = {\rm Adjusted\ Consumption} + {\rm Adjusted\ Wages} - {\rm Average\ Transfer\ Payments} - {\rm Adjusted\ Capital\ Income}\]</p><p>where:</p><ul><li><code>Adjusted Consumption</code> is obtained from <a href="#WiNDCHousehold.adjusted_consumption-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_consumption</code></a>.</li><li><code>Adjusted Wages</code> is obtained from <a href="#WiNDCHousehold.adjusted_wages-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_wages</code></a>.</li><li><code>Average Transfer Payments</code> the average over households and states of <a href="#WiNDCHousehold.initial_transfer_payments-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>initial_transfer_payments</code></a>.</li><li><code>Adjusted Capital Income</code> is obtained from <a href="#WiNDCHousehold.adjusted_capital_income-Tuple{HouseholdTable, WiNDCRegional.State, WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.adjusted_capital_income</code></a>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/build.jl#L837-L872">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.output_tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">output_tax_rate(
        HH::HouseholdTable; 
        column::Symbol = :value, 
        output::Symbol = :value,
        parameter = :output_tax_rate
    )</code></pre><p>Calculate the output tax rate for each commodity in each region.</p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:output_tax_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">:otr</td><td style="text-align: right">sector</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:output<em>tax</em>rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><ul><li><code>Intermediate_Supply</code></li><li><code>Output_Tax</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Output\_Tax\_Rate} = \frac{\rm Output\_Tax}{\sum_{\rm commodity} \rm Intermediate\_Supply}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L381-L421">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.parameter_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.parameter_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.parameter_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">parameter_data(data::T; output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Returns initial parameter data for the household model.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">vcat(
    output_tax_rate(data),
    tax_rate(data),
    duty_rate(data),
    capital_tax_rate(data),
    fica_tax_rate(data),
    marginal_labor_tax_rate(data)
    )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.output_tax_rate</code></a></li><li><a href="#WiNDCHousehold.tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.tax_rate</code></a></li><li><a href="#WiNDCHousehold.duty_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.duty_rate</code></a></li><li><a href="#WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.capital_tax_rate</code></a></li><li><a href="#WiNDCHousehold.fica_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.fica_tax_rate</code></a></li><li><a href="#WiNDCHousehold.marginal_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.marginal_labor_tax_rate</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L455-L493">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_local_supply</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">regional_local_supply(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :region_local_supply,
)</code></pre><p>Calculate the regional local supply for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:region_local_supply</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:rls</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:region<em>local</em>supply</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Local_Margin_Supply</code></li><li><code>Local_Demand</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Regional\_Local\_Supply} = \sum (Local\_Margin\_Supply + Local\_Demand)\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L187-L229">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.regional_national_supply-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.regional_national_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_national_supply</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">regional_national_supply(
    HH::HouseholdTable;
    column::Symbol = :value,
    output::Symbol = :value,
    parameter::Symbol = :region_national_supply
)</code></pre><p>Calculate the regional national supply for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:region_national_supply</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:rns</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:region<em>national</em>supply</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Aggregate Parameters</strong></p><ul><li><a href="#WiNDCHousehold.total_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.total_supply</code></a></li><li><a href="#WiNDCHousehold.netports-Tuple{HouseholdTable}"><code>WiNDCHousehold.netports</code></a></li><li><a href="#WiNDCHousehold.regional_local_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.regional_local_supply</code></a></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Regional\_National\_Supply} = {\rm Total\_Supply} - {\rm Netports} - {\rm Regional\_Local\_Supply}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L311-L354">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.representative_agent_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.representative_agent_data-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.representative_agent_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">representative_agent_data(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts representative agent-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    vcat(
        leisure_consumption_elasticity(data),
        average_labor_tax_rate(data),
        labor_supply(data),
        leisure_demand(data),
        table(data, 
            :Personal_Consumption,
            :Household_Interest,
            :Transfer_Payment,
            :Savings,
            :Labor_Endowment;
            normalize=:Use
        )
    )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.leisure_consumption_elasticity-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_consumption_elasticity</code></a></li><li><a href="#WiNDCHousehold.average_labor_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.average_labor_tax_rate</code></a></li><li><a href="#WiNDCHousehold.labor_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.labor_supply</code></a></li><li><a href="#WiNDCHousehold.leisure_demand-Tuple{HouseholdTable}"><code>WiNDCHousehold.leisure_demand</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L868-L910">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.retrieve_cps_data-Tuple{Int64, Dict}"><a class="docstring-binding" href="#WiNDCHousehold.retrieve_cps_data-Tuple{Int64, Dict}"><code>WiNDCHousehold.retrieve_cps_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">retrieve_cps_data(year::Int, info::Dict; state_fips = WiNDCHousehold.load_state_fips()))
retrieve_cps_data(info::Dict; state_fips = WiNDCHousehold.load_state_fips()))</code></pre><p>Retrieve CPS data from the Census API based on the provided configuration. The data  is retrieved using <a href="#WiNDCHousehold.get_cps_data-NTuple{4, Any}"><code>WiNDCHousehold.get_cps_data</code></a> for each specified year and combined into a single DataFrame.</p><p><strong>Arguments</strong></p><ul><li><code>year::Int</code>: The year of the CPS data to retrieve. If missing, all years specified in <code>cps_info</code> are retrieved.</li><li><code>info::Dict</code>: The household configuration dictionary, obtained from </li></ul><p><a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a>.</p><p>The <code>cps_info</code> dictionary is build by <a href="#WiNDCHousehold.load_household_yaml-Tuple{String}"><code>WiNDCHousehold.load_household_yaml</code></a>.</p><p><strong>Returns</strong></p><p>If <code>year</code> is provided, returns a single DataFrame for that year.</p><p>If <code>year</code> is not provided, returns a dictionary mapping each year to its  corresponding CPS DataFrame. Each DataFrame contains the columns given by the input variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/cps.jl#L139-L160">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.saverate_data-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.saverate_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.saverate_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">saverate_data(HH::HouseholdTable; output = :DataFrame)</code></pre><p>Extracts saving rate-related parameters from the household data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(HH, :Investment_Final_Demand; normalize=:Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1129-L1151">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.sectoral_output-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><a class="docstring-binding" href="#WiNDCHousehold.sectoral_output-Tuple{T} where T&lt;:WiNDCHousehold.AbstractHouseholdTable"><code>WiNDCHousehold.sectoral_output</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sectoral_output(data::T, output = :DataFrame) where T&lt;:AbstractHouseholdTable</code></pre><p>Extracts sectoral output-related parameters from the regional data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the sectoral output data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">vcat(
    table(data, 
        :Intermediate_Supply, 
        :Intermediate_Demand, 
        :Labor_Demand, 
        :Capital_Demand;
        normalize = :Use
        ),
    output_tax_rate(data),
    capital_tax_rate(data)
    )</code></pre><p><strong>Aggregate Data</strong></p><ul><li><a href="#WiNDCHousehold.output_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.output_tax_rate</code></a></li><li><a href="#WiNDCHousehold.capital_tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.capital_tax_rate</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L517-L555">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.ssk_data-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.ssk_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.ssk_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ssk_data(HH::HouseholdTable; output = :DataFrame)</code></pre><p>Extracts steady-state capital stock-related parameters from the household data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(HH, :Investment_Final_Demand; normalize=:Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1092-L1114">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.tax_rate-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.tax_rate-Tuple{HouseholdTable}"><code>WiNDCHousehold.tax_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">tax_rate(
    HH::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter = :tax_rate
)</code></pre><p>Calculate the tax rate, inclusive of subsidies, for each commodity in each region. </p><p><strong>Arguments</strong></p><ul><li><code>HH::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol</code>: The parameter to assign to the output (default is <code>:tax_rate</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:tr</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:tax_rate</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Tax</code></li></ul><p><strong>Aggregate Parameters</strong></p><ul><li><a href="#WiNDCHousehold.absorption-Tuple{HouseholdTable}"><code>WiNDCHousehold.absorption</code></a></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Tax\_Rate} = \frac{\rm Tax}{\rm Absorption}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L446-L491">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.total_supply-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.total_supply-Tuple{HouseholdTable}"><code>WiNDCHousehold.total_supply</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">total_supply(
    data::HouseholdTable; 
    column::Symbol = :value, 
    output::Symbol = :value,
    parameter::Symbol = :total_supply
)</code></pre><p>Calculate the total supply for each commodity. </p><p><strong>Arguments</strong></p><ul><li><code>data::HouseholdTable</code>: The household table containing household data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>column::Symbol = :value</code>: The column to aggregate (default is <code>:value</code>).</li><li><code>output::Symbol = :value</code>: The name of the output column (default is <code>:value</code>).</li><li><code>parameter::Symbol = :total_supply</code>: The parameter to assign to the output (default is <code>:total_supply</code>).</li></ul><p><strong>Returns</strong></p><p>A <code>DataFrame</code> with the following structure:</p><table><tr><th style="text-align: right">row</th><th style="text-align: right">col</th><th style="text-align: right">region</th><th style="text-align: right">year</th><th style="text-align: right">parameter</th><th style="text-align: right">value</th></tr><tr><td style="text-align: right">commodity</td><td style="text-align: right">:tot_sup</td><td style="text-align: right">state</td><td style="text-align: right">year</td><td style="text-align: right">:total_supply</td><td style="text-align: right">value</td></tr></table><p>Non-symbol values are sets.</p><p><strong>Parameters</strong></p><p>These values are extracted from the HouseholdTable</p><ul><li><code>Intermediate_Supply</code></li><li><code>Household_Supply</code></li></ul><p><strong>Calculation</strong></p><p class="math-container">\[{\rm Total\_Supply} = \sum_{sectors} {\rm Intermediate\_Supply}} + {{\rm Household\_Supply}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/aggregate_parameters.jl#L66-L108">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.trans_data-Tuple{HouseholdTable}"><a class="docstring-binding" href="#WiNDCHousehold.trans_data-Tuple{HouseholdTable}"><code>WiNDCHousehold.trans_data</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">trans_data(HH::HouseholdTable; output = :DataFrame)</code></pre><p>Extracts transfer-related parameters from the household data table.</p><p><strong>Arguments</strong></p><ul><li><code>data::T</code>: A WiNDCHousehold data table.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output::Symbol = :DataFrame</code>: The output format, either <code>:DataFrame</code> or <code>:DefaultDict</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A DataFrame or DefaultDict containing the parameter data.</li></ul><p><strong>Data</strong></p><pre><code class="language-julia hljs">    table(HH, :Government_Final_Demand; normalize=:Use)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/model.jl#L1166-L1188">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}"><a class="docstring-binding" href="#WiNDCHousehold.transfer_weights-Tuple{WiNDCHousehold.RawHouseholdData}"><code>WiNDCHousehold.transfer_weights</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">transfer_weights(raw_data::RawHouseholdData)</code></pre><p>Compute transfer weights based on the CPS vs NIPA comparison in <code>raw_data</code>.</p><p>Transfer weight is defined as the ratio of NIPA transfer income to CPS transfer income for each transfer category. If the CPS income for a category is zero, the weight from either the Meyer or Rothbaum study is used as a fallback.</p><p>Returns a DataFrame with the following columns:</p><ul><li><code>year</code>: The year of the data.</li><li><code>source</code>: The CPS income source/category.</li><li><code>trn_weight</code>: The computed transfer weight for the category.</li></ul><p><strong>Arguments</strong></p><ul><li><code>raw_data::RawHouseholdData</code>: The raw household data containing CPS and NIPA income data.</li></ul><p><strong>Raw Input Data</strong></p><ul><li><code>nipa_cps</code>: A DataFrame containing NIPA and CPS income data by category.</li></ul><p><strong>Transfer Categories</strong></p><table><tr><th style="text-align: right">Category</th><th style="text-align: right">Source</th></tr><tr><td style="text-align: right">government benefits: unemployment insurance</td><td style="text-align: right">hucval</td></tr><tr><td style="text-align: right">government benefits: social security</td><td style="text-align: right">hssval</td></tr><tr><td style="text-align: right">government benefits: social security</td><td style="text-align: right">hssival</td></tr><tr><td style="text-align: right">government benefits: social security</td><td style="text-align: right">hdisval</td></tr><tr><td style="text-align: right">government benefits: veterans&#39; benefits</td><td style="text-align: right">hvetval</td></tr></table><p><strong>Meyer and Rothbaum Weights</strong></p><table><tr><th style="text-align: right">Source</th><th style="text-align: right">Literature</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: right">hucval</td><td style="text-align: right">meyer</td><td style="text-align: right">1/0.679</td></tr><tr><td style="text-align: right">hssval</td><td style="text-align: right">meyer</td><td style="text-align: right">1/0.899</td></tr><tr><td style="text-align: right">hssival</td><td style="text-align: right">meyer</td><td style="text-align: right">1/0.759</td></tr><tr><td style="text-align: right">hdisval</td><td style="text-align: right">meyer</td><td style="text-align: right">1/0.819</td></tr><tr><td style="text-align: right">hvetval</td><td style="text-align: right">rothbaum</td><td style="text-align: right">1/0.679</td></tr><tr><td style="text-align: right">hwcval</td><td style="text-align: right">meyer</td><td style="text-align: right">1 / 0.527</td></tr><tr><td style="text-align: right">hpawval</td><td style="text-align: right">meyer</td><td style="text-align: right">1 / 0.487</td></tr><tr><td style="text-align: right">hsurval</td><td style="text-align: right">meyer</td><td style="text-align: right">1 / 0.908</td></tr><tr><td style="text-align: right">hedval</td><td style="text-align: right">rothbaum</td><td style="text-align: right">1 / 0.804</td></tr><tr><td style="text-align: right">hcspval</td><td style="text-align: right">rothbaum</td><td style="text-align: right">1 / 0.804</td></tr><tr><td style="text-align: right">hfinval</td><td style="text-align: right">meyer</td><td style="text-align: right">1 / 0.539</td></tr></table><div class="admonition is-info" id="note-6b3d523c125b58bf"><header class="admonition-header"><a class="admonition-anchor" href="#note-6b3d523c125b58bf" title="Permalink"></a></header><div class="admonition-body"><p>The values are hard coded based on literature and may need to be updated as new studies emerge. Also, the year is fixed at 2024 for these weights. Need to update for more years in the future.</p></div></div><p><strong>Process</strong></p><ol><li>Extract the transfer categories from the <code>cps_nipa</code></li><li>Compute the transfer weight as the ratio of NIPA to CPS income.</li><li>Add Meyer and Rothbaum weights for categories where NIPA is zero,   preference given to Meyer weights.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/pre_calibration_data.jl#L1-L61">source</a></section></details></article><article><details class="docstring" open="true"><summary id="WiNDCHousehold.windc_vs_nipa_income_categories-Tuple{WiNDCRegional.State, DataFrames.DataFrame}"><a class="docstring-binding" href="#WiNDCHousehold.windc_vs_nipa_income_categories-Tuple{WiNDCRegional.State, DataFrames.DataFrame}"><code>WiNDCHousehold.windc_vs_nipa_income_categories</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">windc_vs_nipa_income_categories(
    state_table::WiNDCRegional.State,
    nipa::DataFrame
)</code></pre><p>Compare WiNDC labor and capital income to NIPA data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/WiNDCHousehold.jl/blob/964fdfb8ca9119bf6c102f766f83b096904efd40/src/data/get_nipa.jl#L102-L109">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../model/model/">« Household Model</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 19 January 2026 18:53">Monday 19 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
